<!DOCTYPE HTML>
<html lang="zh-CN">
    <!-- shw2018 洪卫  modify 2019.08.15-->



<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Spring Boot, Spring Cloud, 微服务, Java技术, 好好学java, Java面试, 分布式, 最新干货分享">
    <meta name="baidu-site-verification" content="fmlEuI34ir" />
    <meta name="google-site-verification" content="ZWVq5UvPg33BCEA3LRTUkYe5J854o9lF1_WRTer9l8A" />
    <meta name="description" content="本站是 好好学java 的技术分享博客。内容涵盖Java后端技术、Spring Boot、Spring Cloud、微服务架构、分布式、Java面试、测试开发等相关的研究与知识分享。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>5w 字 | 172 图 | 超级赛亚级 Spring Cloud 实战 | 好好学java | Spring Boot | Spring Cloud | 微服务 | Java技术 | Java面试 | 分布式 | 最新干货分享</title>
    <link rel="icon" type="image/png" href="http://image.ouyangsihai.cn/FjihsEiBMONnJIRtPwgGkjE4HAP7">

    <!-- <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css"> -->
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <!-- 自定义fontawesome样式：欧阳思海 -->
    <link rel="stylesheet" type="text/css" href="/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/css/brands.min.css">
    <link rel="stylesheet" type="text/css" href="/css/fontawesome.min.css">
    <link rel="stylesheet" type="text/css" href="/css/regular.min.css">
    <link rel="stylesheet" type="text/css" href="/css/solid.min.css">


    <style type="text/css">
        code[class*="language-"],
            pre[class*="language-"] {
                white-space: pre !important;
            }

            

        /* 将matery.css中的背景颜色修改放到这里：欧阳思海 */
        .bg-color {
            background-image: linear-gradient(to right, #ec8585 0%, #419488 100%);
            opacity: 0.9;
            // 透明度
        }
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>

    
    
    <script>
        (function () {
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>
    

    <script>
        var _hmt = _hmt || [];
        (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?6fe466069710c03a563713b507fbaca7";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
        })();
    </script>


    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-XXXXX-Y', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

    <script>(function (i, s, o, g, r, a, m) { i["DaoVoiceObject"] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; a.charset = "utf-8"; m.parentNode.insertBefore(a, m) })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0a804bac.js", "daovoice")</script>

    <script>
        if (true) {
            daovoice('init', {
                app_id: "0a804bac",
                user_id: "NO_89757", // 必填: 该用户在您系统上的唯一ID
                email: "daovoice@example.com", // 选填:  该用户在您系统上的主邮箱
                name: "道客船长", // 选填: 用户名
                signed_up: 1449821660 // 选填: 用户的注册时间，用Unix时间戳表示
            });
            daovoice('update');

            daovoice('init', {
                app_id: "0a804bac"
            });
            daovoice('update');
        }
    </script>
<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/rss2.xml" title="好好学java" type="application/rss+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

    <body>

        <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="http://image.ouyangsihai.cn/FjihsEiBMONnJIRtPwgGkjE4HAP7" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span" style="font-size: 1.4rem;">好好学java</span>
                </a>
            </div>
            


<!-- <a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="" class="waves-effect waves-light">
            
            <i class="fa "></i>
            
            <span></span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title=""></i>
        </a>
    </li>
</ul> -->

<!-- 支持二级菜单特性 洪卫 shw2018 modify 2019.09.17  -->
<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-align-justify"></i></a>
<ul class="right nav-menu">
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories/" class="waves-effect waves-light">
                
                  <i style="font-size: 1.1rem;" class="fa fa-folder-minus"></i>
                
                <span style="font-size: 1.1rem;">Java学习</span>
                <i style="font-size: 1.1rem;" class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/categories/Java%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/" >
                    
                    <span>Java入门</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/Javaweb/" >
                    
                    <span>Java Web</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/spring%E6%95%99%E7%A8%8B/" >
                    
                    <span>Spring教程</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/springboot%E6%95%99%E7%A8%8B/" >
                    
                    <span>SpringBoot教程</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/springcloud%E6%95%99%E7%A8%8B/" >
                    
                    <span>SpringCloud教程</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/Java%E9%9D%A2%E8%AF%95%E9%A2%98/" >
                    
                    <span>Java面试</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E5%89%91%E6%8C%87offer/" >
                    
                    <span>剑指offer</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories/" class="waves-effect waves-light">
                
                  <i style="font-size: 1.1rem;" class="fa fa-code-branch"></i>
                
                <span style="font-size: 1.1rem;">Java进阶</span>
                <i style="font-size: 1.1rem;" class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97/" >
                    
                    <span>设计模式</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" >
                    
                    <span>Java并发编程</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3/" >
                    
                    <span>数据库</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/redis/" >
                    
                    <span>Redis</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/linux/" >
                    
                    <span>Linux</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/" >
                    
                    <span>Java实战项目</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories/" class="waves-effect waves-light">
                
                  <i style="font-size: 1.1rem;" class="fa fa-code"></i>
                
                <span style="font-size: 1.1rem;">python学习</span>
                <i style="font-size: 1.1rem;" class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/categories/python%E5%9F%BA%E7%A1%80/" >
                    
                    <span>python基础</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/python%E6%A1%86%E6%9E%B6/" >
                    
                    <span>python框架</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/python%E5%85%B6%E4%BB%96/" >
                    
                    <span>python其他</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories/" class="waves-effect waves-light">
                
                  <i style="font-size: 1.1rem;" class="fa fa-coffee"></i>
                
                <span style="font-size: 1.1rem;">Java扩展</span>
                <i style="font-size: 1.1rem;" class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/categories/dubbo/" >
                    
                    <span>dubbo</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/netty/" >
                    
                    <span>netty</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/rpc/" >
                    
                    <span>rpc</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/eureka/" >
                    
                    <span>eureka</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" >
                    
                    <span>中间件</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/" >
                    
                    <span>分布式</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories/" class="waves-effect waves-light">
                
                  <i style="font-size: 1.1rem;" class="fa fa-desktop"></i>
                
                <span style="font-size: 1.1rem;">计算机核心</span>
                <i style="font-size: 1.1rem;" class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" >
                    
                    <span>数据结构</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/leetcode%E5%88%B7%E9%A2%98/" >
                    
                    <span>leetcode刷题</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" >
                    
                    <span>计算机网络</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/categories/%E7%AE%97%E6%B3%95/" >
                    
                    <span>算法</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/categories/" class="waves-effect waves-light">
              
                <i style="font-size: 1.1rem;" class="fa fa-adjust"></i>
              
              <span style="font-size: 1.1rem;">学习资源</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/contact" class="waves-effect waves-light">
              
                <i style="font-size: 1.1rem;" class="fa fa-envelope"></i>
              
              <span style="font-size: 1.1rem;">留言</span>
            </a>

            
      </li>
    

    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="http://image.ouyangsihai.cn/FjihsEiBMONnJIRtPwgGkjE4HAP7" class="logo-img circle responsive-img">
        
        <div class="logo-name">好好学java</div>
        <div class="logo-desc">
            
            
            本站是 好好学java 的技术分享博客，涵盖Java后端技术、SpringBoot、微服务架构、分布式、Java面试等知 ...
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa fa-fw fa-folder-minus"></i>
			
			Java学习
			<span class="m-icon"><i class="fa fa-chevron-right"></i></span>
		</a>
            <ul  >
              
                <li>   
				
                  <a href="/categories/Java%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/ " style="margin-left:75px";>
				  
		          <span>Java入门</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Javaweb/ " style="margin-left:75px";>
				  
		          <span>Java Web</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/spring%E6%95%99%E7%A8%8B/ " style="margin-left:75px";>
				  
		          <span>Spring教程</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/springboot%E6%95%99%E7%A8%8B/ " style="margin-left:75px";>
				  
		          <span>SpringBoot教程</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/springcloud%E6%95%99%E7%A8%8B/ " style="margin-left:75px";>
				  
		          <span>SpringCloud教程</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Java%E9%9D%A2%E8%AF%95%E9%A2%98/ " style="margin-left:75px";>
				  
		          <span>Java面试</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E5%89%91%E6%8C%87offer/ " style="margin-left:75px";>
				  
		          <span>剑指offer</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa fa-fw fa-code-branch"></i>
			
			Java进阶
			<span class="m-icon"><i class="fa fa-chevron-right"></i></span>
		</a>
            <ul  >
              
                <li>   
				
                  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97/ " style="margin-left:75px";>
				  
		          <span>设计模式</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/ " style="margin-left:75px";>
				  
		          <span>Java并发编程</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3/ " style="margin-left:75px";>
				  
		          <span>数据库</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/redis/ " style="margin-left:75px";>
				  
		          <span>Redis</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/linux/ " style="margin-left:75px";>
				  
		          <span>Linux</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/ " style="margin-left:75px";>
				  
		          <span>Java实战项目</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa fa-fw fa-code"></i>
			
			python学习
			<span class="m-icon"><i class="fa fa-chevron-right"></i></span>
		</a>
            <ul  >
              
                <li>   
				
                  <a href="/categories/python%E5%9F%BA%E7%A1%80/ " style="margin-left:75px";>
				  
		          <span>python基础</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/python%E6%A1%86%E6%9E%B6/ " style="margin-left:75px";>
				  
		          <span>python框架</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/python%E5%85%B6%E4%BB%96/ " style="margin-left:75px";>
				  
		          <span>python其他</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa fa-fw fa-coffee"></i>
			
			Java扩展
			<span class="m-icon"><i class="fa fa-chevron-right"></i></span>
		</a>
            <ul  >
              
                <li>   
				
                  <a href="/categories/dubbo/ " style="margin-left:75px";>
				  
		          <span>dubbo</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/netty/ " style="margin-left:75px";>
				  
		          <span>netty</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/rpc/ " style="margin-left:75px";>
				  
		          <span>rpc</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/eureka/ " style="margin-left:75px";>
				  
		          <span>eureka</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/ " style="margin-left:75px";>
				  
		          <span>中间件</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/ " style="margin-left:75px";>
				  
		          <span>分布式</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa fa-fw fa-desktop"></i>
			
			计算机核心
			<span class="m-icon"><i class="fa fa-chevron-right"></i></span>
		</a>
            <ul  >
              
                <li>   
				
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ " style="margin-left:75px";>
				  
		          <span>数据结构</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/leetcode%E5%88%B7%E9%A2%98/ " style="margin-left:75px";>
				  
		          <span>leetcode刷题</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ " style="margin-left:75px";>
				  
		          <span>计算机网络</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E7%AE%97%E6%B3%95/ " style="margin-left:75px";>
				  
		          <span>算法</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories/" class="waves-effect waves-light">
			
			    <i class="fa fa-fw fa-adjust"></i>
			
			学习资源
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa fa-fw fa-envelope"></i>
			
			留言
		</a>
          
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>

        



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/2.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        5w 字 | 172 图 | 超级赛亚级 Spring Cloud 实战
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }

    /* 自定义mycard：欧阳思海 */

    #my-card {
        /* position: relative; */
        width: 310px;
        height: 300px;
        /* max-height: 330px; */
        margin-bottom: 15px;
        margin-top: 15px;
        /* text-align: center; */
        border: 0;
        border-radius: 3px;
        color: rgba(0, 0, 0, .87);
        background: #fff 50%;
        background-image: none;
        background-size: auto;
        background-size: cover;
        box-shadow: 0 15px 35px rgba(50, 50, 93, .1), 0 5px 15px rgba(0, 0, 0, .07);
    }

    /* .widget {
        line-height: 1.6em;
        word-wrap: break-word;
        font-size: 0.9em;
        padding-top: 15px;
        padding-left: -45px;
    } */
</style>




<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- shw2018 洪卫  modify 2019.08.15-->

<!-- 代码块修改的代码开始 -->
<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFunction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>

<!-- 代码块修改代码结束 -->


<!-- 文章内容详情 -->
<div id="container">
    <div id="artDetail">
        <div class="card">
            <div class="card-content article-info">
                <div class="row tag-cate">
                    <div class="col s7">
                        
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                        
                    </div>
                    <div class="col s5 right-align">
                        
                        <div class="post-cate">
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A5%BD%E5%A5%BD%E5%AD%A6java/" class="post-category" target="_blank">
                                好好学java
                            </a>
                            
                        </div>
                        
                    </div>
                </div>

                <div class="post-info">
                    <div class="post-date info-break-policy">
                        <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                        2021-04-04
                    </div>

                    <div class="post-author info-break-policy">
                        <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                        
                        欧阳思海
                        
                    </div>

                    
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                        18.1k
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        86 分
                    </div>
                    
                    

                    
                    <span id="busuanzi_container_site_pv" style='display:none'></span>
                    <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>

                    

                </div>
            </div>
            <hr class="clearfix">
            <div class="card-content article-card-content">
                <!-- 欧阳思海，modify，2020.05.01-->
<!-- 文章详情详情页面的头部广告位置信息 -->
<div id="post-head-panel">
    
    <a href="https://github.com/OUYANGSIHAI/JavaInterview" style="font-size: 18px;" target="_blank">
        <img src="/icons/hot.gif">
        本人花费半年的时间总结的《Java面试指南》已拿腾讯等大厂offer，已开源在github ，欢迎star！
    </a>
    
    
</div>
<br />



<blockquote>
    
            <p>本文GitHub <a href="https://github.com/OUYANGSIHAI/JavaInterview" target="_blank">https://github.com/OUYANGSIHAI/JavaInterview</a> 已收录，这是我花了6个月总结的<b>一线大厂Java面试</b>总结，本人已拿大厂offer，欢迎star</p>
    
    <p>原文链接：blog.ouyangsihai.cn &gt;&gt; <a href="/5w-zi-172-tu-chao-ji-sai-ya-ji-spring-cloud-shi-zhan.html" target="_blank">5w 字 | 172 图 | 超级赛亚级 Spring Cloud 实战</a></p>
</blockquote>
                <div id="articleContent">
                    <p>点击上方 **好好学java **，选择 **星标 **公众号</p>
<h4 id="重磅资讯、干货，第一时间送达"><a href="#重磅资讯、干货，第一时间送达" class="headerlink" title="重磅资讯、干货，第一时间送达"></a><pre class="has"><code class="language-php">重磅资讯、干货，第一时间送达</h4><p></code></pre></p>
<h2 id="今日推荐："><a href="#今日推荐：" class="headerlink" title="今日推荐："></a><strong><strong>今日推荐：</strong></strong></h2><h4 id="个人原创100W-访问量博客：点击前往，查看更多"><a href="#个人原创100W-访问量博客：点击前往，查看更多" class="headerlink" title=" 个人原创100W+访问量博客：点击前往，查看更多"></a><pre class="has"><code class="language-php"> 个人原创100W+访问量博客：点击前往，查看更多</h4><p></code></pre></p>
<p>一、PassJava 项目简介</p>
<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybVd5VjgzRzhzc0I2bUtqdzI0a000Qzd5Yk1NcUJ3Wngybmx6R0hhenpCRVpIQ2QyQnpWRWdZQS82NDA?x-oss-process=image/format,png">
- PassJava 是一款 Java `面试刷题` 的开源系统，可以用零碎时间利用小程序查看常见面试题，夯实 Java 基础。- PassJava 项目可以教会你如何搭建 SpringBoot 项目，Spring Cloud 项目- 采用流行的技术，如 SpringBoot、MyBatis、Redis、 MySql、 MongoDB、 RabbitMQ、Elasticsearch，采用 Docker 容器化部署。
## 项目地址
- [后台平台] https://github.com/Jackson0714/PassJava-Platform- [后台管理] https://github.com/Jackson0714/PassJava-Portal- [学习教程] https://github.com/Jackson0714/PassJava-Learning
## 项目演示
- 后台管理系统- 小程序
## PassJava 中使用的技术

<p>SpringBoot、MyBatis、Redis、 MySql、 MongoDB、 RabbitMQ、Elasticsearch</p>
<h2 id="PassJava-实现的功能概览"><a href="#PassJava-实现的功能概览" class="headerlink" title="PassJava 实现的功能概览"></a>PassJava 实现的功能概览</h2><h2 id="PassJava-数据库表概览"><a href="#PassJava-数据库表概览" class="headerlink" title="PassJava 数据库表概览"></a>PassJava 数据库表概览</h2><h3 id="数据库表前缀说明"><a href="#数据库表前缀说明" class="headerlink" title="数据库表前缀说明"></a>数据库表前缀说明</h3><ul>
<li>ums_*：会员模块相关表- cms_*：内容管理模块相关表- qms_*：题目模块相关表- chms_*：渠道模块相关表- sms_*：学习模块相关表<h1 id="二、项目微服务架构图"><a href="#二、项目微服务架构图" class="headerlink" title="二、项目微服务架构图"></a>二、项目微服务架构图</h1></li>
</ul>
<h2 id="微服务架构图"><a href="#微服务架构图" class="headerlink" title="微服务架构图"></a>微服务架构图</h2><h1 id="三、项目前置要求"><a href="#三、项目前置要求" class="headerlink" title="三、项目前置要求"></a>三、项目前置要求</h1><blockquote>
</blockquote>
<p>  “<br>  由于 PassJava 项目涉及到很多知识点，希望大家先补下功课，推荐的书籍如下。<br>  ”</p>
<h2 id="推荐资料"><a href="#推荐资料" class="headerlink" title="推荐资料"></a>推荐资料</h2><h3 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h3><p>《IntelliJ-IDEA-Tutorial》：<a target="_blank" rel="noopener" href="https://github.com/judasn/IntelliJ-IDEA-Tutorial">https://github.com/judasn/IntelliJ-IDEA-Tutorial</a></p>
<h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><p>《Spring 实战（第 4 版）》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/26767354/">https://book.douban.com/subject/26767354/</a></p>
<h3 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h3><p>《Spring Boot 实战》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/26857423/">https://book.douban.com/subject/26857423/</a></p>
<h3 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h3><p>《MyBatis 从入门到精通》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/27074809/">https://book.douban.com/subject/27074809/</a></p>
<h3 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h3><p>《深入浅出 MySQL》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/25817684/">https://book.douban.com/subject/25817684/</a></p>
<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><p>《循序渐进 Linux（第 2 版）》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/26758194/">https://book.douban.com/subject/26758194/</a></p>
<h3 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h3><p>《Elasticsearch 权威指南》：<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html">https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html</a></p>
<p>《Elasticsearch 技术解析与实战》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/26967826/">https://book.douban.com/subject/26967826/</a></p>
<h3 id="Mongodb"><a href="#Mongodb" class="headerlink" title="Mongodb"></a>Mongodb</h3><p>《MongoDB 实战 (第二版)》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/27061123/">https://book.douban.com/subject/27061123/</a></p>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>《Spring Cloud 与 Docker 微服务架构实战》：<a target="_blank" rel="noopener" href="https://book.douban.com/subject/27028228/">https://book.douban.com/subject/27028228/</a></p>
<h1 id="四、环境搭建篇"><a href="#四、环境搭建篇" class="headerlink" title="四、环境搭建篇"></a>四、环境搭建篇</h1><h2 id="4-1-Vagrant-快速搭建-Ubuntu-虚拟机环境"><a href="#4-1-Vagrant-快速搭建-Ubuntu-虚拟机环境" class="headerlink" title="4.1 Vagrant 快速搭建 Ubuntu 虚拟机环境"></a>4.1 Vagrant 快速搭建 Ubuntu 虚拟机环境</h2><h3 id="1-开启虚拟机服务"><a href="#1-开启虚拟机服务" class="headerlink" title="1. 开启虚拟机服务"></a>1. 开启虚拟机服务</h3><p>Windows 启动配置：Intel Virtualization Technology -&gt; Enabled</p>
<h3 id="2-下载安装-VirtualBox"><a href="#2-下载安装-VirtualBox" class="headerlink" title="2. 下载安装 VirtualBox"></a>2. 下载安装 VirtualBox</h3><p>VirtualBox：虚拟机管理软件</p>
<p><a target="_blank" rel="noopener" href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></p>
<h3 id="3-下载安装-Vagrant"><a href="#3-下载安装-Vagrant" class="headerlink" title="3. 下载安装 Vagrant"></a>3. 下载安装 Vagrant</h3><p>Vagrant：创建和管理虚拟机</p>
<p>Vagrant 软件：<a target="_blank" rel="noopener" href="https://www.vagrantup.com/downloads.html">https://www.vagrantup.com/downloads.html</a></p>
<p>Vagrant 官方镜像：<a target="_blank" rel="noopener" href="https://app.vagrantup.com/boxes/search">https://app.vagrantup.com/boxes/search</a></p>
<ul>
<li>check 是否安装好了 vagrant<br>命令行输入 vagrant</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java">
vagrant
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="4-安装-vagrant-ubuntu-国内镜像"><a href="#4-安装-vagrant-ubuntu-国内镜像" class="headerlink" title="4. 安装 vagrant ubuntu 国内镜像"></a>4. 安装 vagrant ubuntu 国内镜像</h3><pre class="line-numbers language-java"><code class="language-java">
# ubuntu <span class="token number">18.04</span> LTS<span class="token operator">:</span>
vagrant box add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>ubuntu<span class="token operator">-</span>cloud<span class="token operator">-</span>images<span class="token operator">/</span>bionic<span class="token operator">/</span>current<span class="token operator">/</span>bionic<span class="token operator">-</span>server<span class="token operator">-</span>cloudimg<span class="token operator">-</span>amd64<span class="token operator">-</span>vagrant<span class="token punctuation">.</span>box <span class="token operator">--</span>name ubuntu18

# ubunt <span class="token number">16.04</span> LTS：
vagrant box add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>ubuntu<span class="token operator">-</span>cloud<span class="token operator">-</span>images<span class="token operator">/</span>xenial<span class="token operator">/</span>current<span class="token operator">/</span>xenial<span class="token operator">-</span>server<span class="token operator">-</span>cloudimg<span class="token operator">-</span>amd64<span class="token operator">-</span>vagrant<span class="token punctuation">.</span>box <span class="token operator">--</span>name ubuntu16

# ubuntu14：
vagrant box add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>ubuntu<span class="token operator">-</span>cloud<span class="token operator">-</span>images<span class="token operator">/</span>vagrant<span class="token operator">/</span>trusty<span class="token operator">/</span>current<span class="token operator">/</span>trusty<span class="token operator">-</span>server<span class="token operator">-</span>cloudimg<span class="token operator">-</span>amd64<span class="token operator">-</span>vagrant<span class="token operator">-</span>disk1<span class="token punctuation">.</span>box <span class="token operator">--</span>name ubuntu14
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>安装 ubuntu 18</p>
<pre class="line-numbers language-java"><code class="language-java">
vagrant box add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>ubuntu<span class="token operator">-</span>cloud<span class="token operator">-</span>images<span class="token operator">/</span>bionic<span class="token operator">/</span>current<span class="token operator">/</span>bionic<span class="token operator">-</span>server<span class="token operator">-</span>cloudimg<span class="token operator">-</span>amd64<span class="token operator">-</span>vagrant<span class="token punctuation">.</span>box <span class="token operator">--</span>name ubuntu18
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>创建 vagrant 配置文件<br>&#96;&#96;&#96;<br>vagrant init</li>
</ul>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 打开 C<span class="token operator">:</span>\Users\Administrator\Vagrantfile 文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>config.vm.box &#x3D; “base” 修改为<br>config.vm.box &#x3D; “ubuntu18”</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span> 启动虚拟机
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>vagrant up</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">6</span><span class="token punctuation">.</span> 连接虚拟机
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>vagrant ssh</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">7</span><span class="token punctuation">.</span> 配置密码登录
<span class="token operator">-</span> 配置密码登录 vagrant
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Vagrant ssh 进入系统之后<br>sudo su<br>编辑 sshd_config<br>vi &#x2F;etc&#x2F;ssh&#x2F;sshd_config<br>PasswordAuthentication no 改为 PasswordAuthentication yes<br>PermitRootLogin prohibit-password 改为 PermitRootLogin yes<br>重启服务<br>service sshd restart</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 安装 XShell 工具和 XFTP 工具<span class="token operator">-</span> XShell 连接虚拟机账号：root密码：vagrant<span class="token operator">-</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWM0M2FyYWhHM2dHRkV1TkpUZFJmUk1aUlZnR0tZRW50UXVQYVB2U0JxMVEwVlF6aWJ6WFJHNlEvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
## <span class="token number">4.2</span> 配置虚拟机网络

### <span class="token number">1</span><span class="token punctuation">.</span>查看VirtualBox Host<span class="token operator">-</span>Only Network

本地VirtualBox 网络地址 `<span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">56.1</span>`，则修改虚拟机IP地址为同一个网段下，比如`<span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">56.10</span>`

### <span class="token number">2</span><span class="token punctuation">.</span>配置虚拟机IP地址

打开Vagrant 配置文件 C<span class="token operator">:</span>\Users\Administrator\Vagrantfile
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="config-vm-network-“private-network”-ip-“192-168-33-10”"><a href="#config-vm-network-“private-network”-ip-“192-168-33-10”" class="headerlink" title="config.vm.network “private_network”, ip: “192.168.33.10”"></a>config.vm.network “private_network”, ip: “192.168.33.10”</h1><p>修改为<br>config.vm.network “private_network”, ip: “192.168.56.10”</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>重新加载虚拟机
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>vagrant reload</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>查看虚拟机IP地址

虚拟机IP地址：<span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">56.10</span>，和配置文件中的一致

### <span class="token number">5</span><span class="token punctuation">.</span>测试本机是否可以ping通虚拟机

ping <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">56.10</span>，可以ping通

### <span class="token number">6</span><span class="token punctuation">.</span>测试虚拟机是否可以ping通本机

ping <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">10.160</span>，可以ping通

## <span class="token number">4.3</span> 安装docker

https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>docs<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>engine<span class="token operator">/</span>install<span class="token operator">/</span>ubuntu<span class="token operator">/</span>

### <span class="token number">1</span><span class="token punctuation">.</span>卸载老版本docker
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo apt-get remove docker docker-engine docker.io containerd runc</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>设置仓库
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;&#x2F; 命令1<br>$ sudo apt-get install <br>    apt-transport-https <br>    ca-certificates <br>    curl <br>    gnupg-agent <br>    software-properties-common</p>
<pre class="line-numbers language-java"><code class="language-java">

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x2F;&#x2F; 命令2<br>curl -fsSL <a target="_blank" rel="noopener" href="https://download.docker.com/linux/ubuntu/gpg">https://download.docker.com/linux/ubuntu/gpg</a> | sudo apt-key add -</p>
<p>&#x2F;&#x2F; 命令3<br>sudo apt-key fingerprint 0EBFCD88</p>
<p>&#x2F;&#x2F; 命令4<br>sudo add-apt-repository <br>   “deb [arch&#x3D;amd64] <a target="_blank" rel="noopener" href="https://download.docker.com/linux/ubuntu">https://download.docker.com/linux/ubuntu</a> <br>   $(lsb_release -cs) <br>   stable”
   </p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>安装docker
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>sudo apt-get update<br>sudo apt-get install docker-ce docker-ce-cli containerd.io</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>测试安装成功
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>sudo docker run hello-world</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>设置开机自启动

sudo systemctl enable docker

### <span class="token number">6</span><span class="token punctuation">.</span>配置镜像加速

https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>cr<span class="token punctuation">.</span>console<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>cn<span class="token operator">-</span>hangzhou<span class="token operator">/</span>instances<span class="token operator">/</span>mirrors
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo mkdir -p &#x2F;etc&#x2F;docker<br>sudo tee &#x2F;etc&#x2F;docker&#x2F;daemon.json &lt;&lt;-‘EOF’<br>{<br>  “registry-mirrors”: [“您的专属加速器地址”]<br>}<br>EOF<br>sudo systemctl daemon-reload<br>sudo systemctl restart docker</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">7</span><span class="token punctuation">.</span> 免sudo使用docker命令

当以普通用户身份去使用docker images时，出现以下错误：

Got permission denied <span class="token keyword">while</span> trying to connect to the Docker daemon socket at unix<span class="token operator">:</span><span class="token operator">/</span><span class="token comment" spellcheck="true">//var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.26/images/json: dial unix /var/run/docker.sock: connect: permission denied 可以看都，最后告知我们时权限的问题。那么在linux文件权限有三个数据左右drwxrwxrwx，</span>

其中第一为d代表该文件是一个文件夹 前三位、中三位、后三位分别代表这属主权限、属组权限、其他人权限。如图，其中 第三列、第四列分别代表文件的属主、属组。

上图是报错文件的权限展示，可以看到其属主为root，权限为rw，可读可写；其属组为docker，权限为rw，可读可写。如果要当前用户可直接读取该文件，那么我们就为当前用户添加到docker属组即可。

如果还没有 docker group 就添加一个：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo groupadd docker</p>
<p>将用户加入该 group 内。然后退出并重新登录就生效啦。<br>sudo gpasswd -a ${USER} docker</p>
<p>重启 docker 服务<br>sudo service docker restart</p>
<p>切换当前会话到新 group 或者重启 X 会话<br>newgrp - docker</p>
<p>注意:最后一步是必须的，否则因为 groups 命令获取到的是缓存的组信息，刚添加的组信息未能生效，所以 docker images 执行时同样有错。</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">8</span><span class="token punctuation">.</span> apt<span class="token operator">-</span>get update更新慢

Ubantu <span class="token number">18.04</span> apt<span class="token operator">-</span>get update 无法更新，更新慢的问题 https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>stopping5<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">80493643</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo cp &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sources.list.old<br>sudo vim &#x2F;etc&#x2F;apt&#x2F;sources.list<br>替换成阿里源</p>
<p>#阿里源：<br>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty main restricted universe multiverse<br>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-security main restricted universe multiverse<br>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-updates main restricted universe multiverse<br>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-proposed main restricted universe multiverse<br>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-backports main restricted universe multiverse<br>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty main restricted universe multiverse<br>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-security main restricted universe multiverse<br>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-updates main restricted universe multiverse<br>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-proposed main restricted universe multiverse<br>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/ubuntu/">http://mirrors.aliyun.com/ubuntu/</a> trusty-backports main restricted universe multiverse</p>
<pre class="line-numbers language-java"><code class="language-java">

其他命令

docker update redis <span class="token operator">--</span>restart<span class="token operator">=</span>always 虚拟机重启后，redis自动启动

docker update mysql <span class="token operator">--</span>restart<span class="token operator">=</span>always 虚拟机重启后，mysql自动启动

## <span class="token number">4.4</span> docker 安装mysql

### <span class="token number">1</span><span class="token punctuation">.</span>下载镜像
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo docker pull mysql:5.7</p>
<pre class="line-numbers language-java"><code class="language-java">

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>ubuntu@VM-0-13-ubuntu:~$ sudo docker pull mysql:5.7<br>5.7: Pulling from library&#x2F;mysql<br>c499e6d256d6: Pull complete <br>22c4cdf4ea75: Pull complete <br>6ff5091a5a30: Pull complete <br>2fd3d1af9403: Pull complete <br>0d9d26127d1d: Pull complete <br>54a67d4e7579: Pull complete <br>fe989230d866: Pull complete <br>466a91a95e2f: Pull complete <br>3e4554c238f1: Pull complete <br>603b48ead88c: Pull complete <br>1e86a9aa7171: Pull complete <br>Digest: sha256:fbaeced79cfdae5d3c8d4a8c41e883f254f72ed7428c6b93a498824b76d97121<br>Status: Downloaded newer image for mysql:5.7<br>docker.io&#x2F;library&#x2F;mysql:5.7</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>查看下载的镜像
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>sudo docker images</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>创建mysql实例并启动
<span class="token operator">-</span> 创建mysql实例并启动
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo docker run -p 3306:3306 –name mysql <br>-v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql <br>-v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql <br>-v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql <br>-e MYSQL_ROOT_PASSWORD&#x3D;root <br>-d mysql:5.7<br>参数说明<br>-p 3306:3306 将容器的3306端口映射到主机<br>-v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql\ 将日志文件挂载到主机<br>-v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql\ 将数据文件挂载到主机<br>-v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql\ 将配置文件挂载到主机</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 查看docker容器mysql容器已启动
### <span class="token number">4</span><span class="token punctuation">.</span>连接数据库
<span class="token operator">-</span> 用Workbench连接数据库<span class="token operator">-</span> 查看数据库
### <span class="token number">5</span><span class="token punctuation">.</span>进入mysql 容器
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo docker exec -it mysql &#x2F;bin&#x2F;bash</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">6</span><span class="token punctuation">.</span>查看虚拟机映射文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>cd &#x2F;mydata&#x2F;mysql<br>ls</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">7</span><span class="token punctuation">.</span>修改mysql账号密码
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>1.进入mysql容器<br>docker exec -it mysql &#x2F;bin&#x2F;bash</p>
<p>2.登录mysql<br>mysql -u root -p<br>输入密码：root</p>
<p>3.切换数据库<br>use mysql</p>
<p>4.查询root用户<br>select * from user where user &#x3D; root;</p>
<p>5.修改密码<br>update user set authentication_string &#x3D; password(‘新的密码’), password_expired &#x3D; ‘N’, password_last_changed &#x3D; now() where user &#x3D; ‘root’;</p>
<p>6.这条命令暂不清楚<br>update user set plugin&#x3D;”mysql_native_password”;</p>
<p>7.刷新权限<br>flush privileges;</p>
<p>8.退出<br>quit;</p>
<p>9.重新登录<br>mysql -u root -p </p>
<p>输入新的密码，登录成功</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">8</span><span class="token punctuation">.</span>其他命令
<span class="token operator">-</span> 设置容器在机器重启后自动启动
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>docker update 84c –restart&#x3D;always</p>
<pre class="line-numbers language-java"><code class="language-java">

## <span class="token number">4.5</span> docker安装redis

### <span class="token number">1</span><span class="token punctuation">.</span>下载镜像
<span class="token operator">-</span> 下载镜像
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo docker pull redis</p>
<pre class="line-numbers language-java"><code class="language-java">

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>ubuntu@VM-0-13-ubuntu:~$ sudo docker pull redis<br>Using default tag: latest<br>latest: Pulling from library&#x2F;redis<br>c499e6d256d6: Already exists <br>bf1bc8a5a7e4: Pull complete <br>7564fb795604: Pull complete <br>ec6e86f783e4: Pull complete <br>1371d6223f46: Pull complete <br>021fd554320f: Pull complete <br>Digest: sha256:a732b1359e338a539c25346a50bf0a501120c41dc248d868e546b33e32bf4fe4<br>Status: Downloaded newer image for redis:latest<br>docker.io&#x2F;library&#x2F;redis:latest</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 查看下载的镜像
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>sudo docker images</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>启动redis
<span class="token operator">-</span> 创建redis<span class="token punctuation">.</span>conf 配置文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>sudo mkdir -p &#x2F;mydata&#x2F;redis&#x2F;conf<br>sudo touch &#x2F;mydata&#x2F;redis&#x2F;conf&#x2F;redis.conf</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 启动redis
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>sudo docker run -p 6379:6379 –name redis -v &#x2F;mydata&#x2F;redis&#x2F;data:&#x2F;data <br>-v &#x2F;mydata&#x2F;redis&#x2F;conf&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.conf <br>-d redis redis-server &#x2F;etc&#x2F;redis&#x2F;redis.conf</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>连接redis
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>sudo docker exec -it redis redis-cli</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>测试redis

设置a<span class="token operator">=</span><span class="token number">100</span>，返回OK
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>set a 100</p>
<pre class="line-numbers language-java"><code class="language-java">

获取a的值，返回<span class="token string">"100"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>get a</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>设置redis持久化存储
<span class="token operator">-</span> 修改虚拟机映射的redis配置文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改配置文件：<br>sudo vim  &#x2F;mydata&#x2F;redis&#x2F;conf&#x2F;redis.conf<br>添加配置：<br>appendonly yes</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 检查是否生效
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>重启redis容器：<br>docker restart redis<br>设置a&#x3D;200，返回OK<br>set a 200<br>获取a的值，返回”200”<br>get a<br>重启redis容器<br>sudo docker restart redis<br>重新连接redis容器<br>sudo docker exec -it redis redis-cli<br>获取a的值<br>get a,返回”200”</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">6</span><span class="token punctuation">.</span>安装redis可视化工具
<span class="token operator">-</span> 安装redis可视化工具redis<span class="token operator">-</span>desktop<span class="token operator">-</span>manager<span class="token operator">-</span> 连接redis<span class="token operator">-</span> 查看redis数据库
## <span class="token number">4.6</span> 本地开发环境配置

### <span class="token number">1</span><span class="token punctuation">.</span> 本地环境安装Java

我本地环境的java版本 <span class="token number">1.8</span><span class="token punctuation">.</span>0_131
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>java -version</p>
<pre class="line-numbers language-java"><code class="language-java">

java安装和环境变量配置：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>jackson0714<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">6591942</span><span class="token punctuation">.</span>html

### <span class="token number">2</span><span class="token punctuation">.</span>本地环境配置Maven

（<span class="token number">1</span>）下载Maven，拷贝文件夹到C盘

C<span class="token operator">:</span>\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token punctuation">.</span><span class="token number">2</span>

（<span class="token number">2</span>）添加到环境变量

cmder里面 执行命令 mvn <span class="token operator">-</span>v

如果报错命令不存在，则重新启动cmder

（<span class="token number">3</span>）设置Maven代理

阿里云代理 https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>maven<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>mvn<span class="token operator">/</span>view

点击使用指南，拷贝配置指南
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;mirror&gt;<br>    &lt;id&gt;aliyunmaven&lt;&#x2F;id&gt;<br>    &lt;mirrorOf&gt;*&lt;&#x2F;mirrorOf&gt;<br>    &lt;name&gt;阿里云公共仓库&lt;&#x2F;name&gt;<br>    &lt;url&gt;<a target="_blank" rel="noopener" href="https://maven.aliyun.com/repository/public&lt;/url">https://maven.aliyun.com/repository/public&lt;/url</a>&gt;<br>&lt;&#x2F;mirror&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

（<span class="token number">4</span>）配置jdk1<span class="token number">.8</span>编译项目
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&lt;profiles&gt;<br>    &lt;profile&gt;<br>        &lt;id&gt;jdk-1.8&lt;&#x2F;id&gt;<br>        &lt;activation&gt;<br>            &lt;activeByDefault&gt;true&lt;&#x2F;activeByDefault&gt;<br>            &lt;jdk&gt;1.8&lt;&#x2F;jdk&gt;<br>        &lt;&#x2F;activation&gt;<br>        &lt;properties&gt;<br>            &lt;maven.compiler.source&gt;1.8&lt;&#x2F;maven.compiler.source&gt;<br>            &lt;maven.compiler.target&gt;1.8&lt;&#x2F;maven.compiler.target&gt;<br>            &lt;maven.compiler.compilerVersion&gt;1.8&lt;&#x2F;maven.compiler.compilerVersion&gt;<br>        &lt;&#x2F;properties&gt;<br>    &lt;&#x2F;profile&gt;<br>&lt;profiles&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>IDEA Maven构建工具配置
<span class="token operator">-</span> Maven配置<span class="token operator">-</span> 字符集配置
### <span class="token number">4</span><span class="token punctuation">.</span> IDEA 安装Lombok插件

Lombok：简化JavaBean的开发

## <span class="token number">5</span><span class="token punctuation">.</span> IDEA 安装mybatisx 插件

mybatisx：mybatis plus开发的一个插件，从mapper方法快速定位到xml文件

### <span class="token number">6</span><span class="token punctuation">.</span>安装VSCode

https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>code<span class="token punctuation">.</span>visualstudio<span class="token punctuation">.</span>com<span class="token operator">/</span>

### <span class="token number">7</span><span class="token punctuation">.</span>添加VSCode插件
<span class="token operator">-</span> Auto Close Tag 自动加上关闭标签<span class="token operator">-</span> Auto Rename Tag 自动命名配对标签<span class="token operator">-</span> Chinese 中文简体包<span class="token operator">-</span> ESLint 语法检查<span class="token operator">-</span> HTML CSS Support 帮助CSS开发<span class="token operator">-</span> HTML Snippets 帮忙HTML开发<span class="token operator">-</span> <span class="token function">JavaScript</span> <span class="token punctuation">(</span>ES6<span class="token punctuation">)</span> 帮助JavaScript开发<span class="token operator">-</span> Liver Server 启动一个本地服务<span class="token operator">-</span> open in browser 用浏览器打开文件<span class="token operator">-</span> Vetur  帮助Vue开发<span class="token operator">-</span> minapp 帮助小程序开发
### 问题

<span class="token number">1</span><span class="token punctuation">.</span>新项目导入main1<span class="token punctuation">,</span>main2

删除main1<span class="token punctuation">.</span>iml<span class="token punctuation">,</span>main2<span class="token punctuation">.</span>iml

## <span class="token number">4.7</span> 配置Git

### <span class="token number">1</span><span class="token punctuation">.</span>配置git 用户名和邮箱
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>git config –global user.name “jackson0714”<br>git config –global user.email “<a href="mailto:&#x6a;&#x61;&#x63;&#107;&#x73;&#x6f;&#x6e;&#48;&#x35;&#56;&#53;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#x6d;">&#x6a;&#x61;&#x63;&#107;&#x73;&#x6f;&#x6e;&#48;&#x35;&#56;&#53;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#x6d;</a>“</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>生成ssh key
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>ssh-keygen -t rsa -b 4096 -C “<a href="mailto:&#106;&#97;&#x63;&#x6b;&#x73;&#x6f;&#x6e;&#x30;&#53;&#x38;&#53;&#64;&#x31;&#x36;&#51;&#x2e;&#99;&#x6f;&#109;">&#106;&#97;&#x63;&#x6b;&#x73;&#x6f;&#x6e;&#x30;&#53;&#x38;&#53;&#64;&#x31;&#x36;&#51;&#x2e;&#99;&#x6f;&#109;</a>“</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>设置ssh key
<span class="token operator">-</span> 打开文件
C<span class="token operator">:</span>\Users\Administrator<span class="token punctuation">.</span>ssh\id_rsa<span class="token punctuation">.</span>pub
<span class="token operator">-</span> 拷贝里面的内容<span class="token operator">-</span> 打开这个链接
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>settings<span class="token operator">/</span>ssh<span class="token operator">/</span><span class="token keyword">new</span>
<span class="token operator">-</span> 粘贴已拷贝的内容<span class="token operator">-</span> 保存ssh key
### <span class="token number">4</span><span class="token punctuation">.</span>遇到的问题

如果遇到Fatal<span class="token operator">:</span> HttpRequestException encountered问题

则下载这个安装包解决：

Git Credential Manager <span class="token keyword">for</span> Windows v1<span class="token number">.20</span>

链接：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>Microsoft<span class="token operator">/</span>Git<span class="token operator">-</span>Credential<span class="token operator">-</span>Manager<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">-</span>Windows<span class="token operator">/</span>releases<span class="token operator">/</span>

git每次提交都需要输入用户名和密码

解决办法：git config <span class="token operator">--</span>global credential<span class="token punctuation">.</span>helper store

下次提交输入用户名和密码后就会记住了

### <span class="token number">5</span><span class="token punctuation">.</span>让一个项目同时提交到码云和GitHub两个仓库

在项目目录里找到<span class="token punctuation">.</span>git文件夹然后找到config文件。

打开这个文件后找到下面的代码
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>[remote “origin”]<br>    url &#x3D; git提交地址<br>    fetch &#x3D; +refs&#x2F;heads&#x2F;<em>:refs&#x2F;remotes&#x2F;origin&#x2F;</em></p>
<pre class="line-numbers language-java"><code class="language-java">

将其改成
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>[remote “origin”]<br>    url &#x3D; 码云Git提交地址<br>    url &#x3D; GitHub提交地址<br>    fetch &#x3D; +refs&#x2F;heads&#x2F;<em>:refs&#x2F;remotes&#x2F;origin&#x2F;</em></p>
<pre class="line-numbers language-java"><code class="language-java">

问题：

c731c6f<span class="token punctuation">.</span><span class="token punctuation">.</span>69bae9b  master <span class="token operator">-</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span> master To https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>gitee<span class="token punctuation">.</span>com<span class="token operator">/</span>jayh2018<span class="token operator">/</span>passjava<span class="token operator">-</span>portal<span class="token punctuation">.</span>git <span class="token operator">!</span> <span class="token punctuation">[</span>rejected<span class="token punctuation">]</span>        master <span class="token operator">-</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span> <span class="token function">master</span> <span class="token punctuation">(</span>fetch first<span class="token punctuation">)</span> error<span class="token operator">:</span> failed to push some refs to <span class="token string">'https://gitee.com/jayh2018/passjava-portal.git'</span> hint<span class="token operator">:</span> Updates were rejected because the remote contains work that you <span class="token keyword">do</span> hint<span class="token operator">:</span> not have locally<span class="token punctuation">.</span> This is usually caused by another repository pushing hint<span class="token operator">:</span> to the same ref<span class="token punctuation">.</span> You may want to first integrate the remote changes hint<span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token string">'git pull ...'</span><span class="token punctuation">)</span> before pushing again<span class="token punctuation">.</span> hint<span class="token operator">:</span> See the <span class="token string">'Note about fast-forwards'</span> in <span class="token string">'git push --help'</span> <span class="token keyword">for</span> details<span class="token punctuation">.</span>

## <span class="token number">4.8</span> Windows安装mysql

### <span class="token number">1</span><span class="token punctuation">.</span>安装截图

### <span class="token number">2</span><span class="token punctuation">.</span>遇到的问题 <span class="token number">1</span>

windows用syslog连接本地mysql数据库，提示 plugin caching_sha2_password

解决方案：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ALTER USER ‘root‘@’%’ IDENTIFIED WITH mysql_native_password BY ‘123’;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>遇到的问题 <span class="token number">2</span>

Host is not allowed to connect to <span class="token keyword">this</span> MySQL server

使用远程连接mysql的时候碰到这样的错误：

Host is not allowed to connect to <span class="token keyword">this</span> MySQL server。

简单的解决方式如下：

（<span class="token number">1</span>）修改表。可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 <span class="token string">"mysql"</span> 数据库里的 <span class="token string">"user"</span> 表里的 <span class="token string">"host"</span> 项，从<span class="token string">"localhost"</span>改称<span class="token string">"%"</span>

mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p

按照提示输入密码

mysql<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>use mysql<span class="token punctuation">;</span>

mysql<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>update user set host <span class="token operator">=</span> <span class="token string">'%'</span> where user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>

（<span class="token number">2</span>）修改完后执行如下SQL命令

flush privileges

# 五、PassJava 基础实践篇

## <span class="token number">5.1</span> 初始化项目和添加微服务

### <span class="token number">1</span><span class="token punctuation">.</span>GitHub上创建一个空的仓库

### <span class="token number">2</span><span class="token punctuation">.</span>从GitHub上引入空的项目

### <span class="token number">3</span><span class="token punctuation">.</span>添加内容服务

passjava<span class="token operator">-</span>content



<span class="token operator">|</span>序号<span class="token operator">|</span>字段<span class="token operator">|</span>内容
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>group<span class="token operator">|</span>com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>passjava
<span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>Artifact<span class="token operator">|</span>passjava<span class="token operator">-</span>content
<span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>Name<span class="token operator">|</span>passjava<span class="token operator">-</span>content
<span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>Description<span class="token operator">|</span>佳必过<span class="token operator">-</span>内容服务
<span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>Package<span class="token operator">|</span>com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>passjava<span class="token punctuation">.</span>content


<span class="token operator">-</span> 添加依赖组件SpringWeb<span class="token punctuation">,</span> OpenFeign
### <span class="token number">3</span><span class="token punctuation">.</span>添加其他微服务



<span class="token operator">|</span>序号<span class="token operator">|</span>服务描述<span class="token operator">|</span>服务名
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span>内容微服务<span class="token operator">|</span>passjava<span class="token operator">-</span>content
<span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span>会员微服务<span class="token operator">|</span>passjava<span class="token operator">-</span>member
<span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span>题目微服务<span class="token operator">|</span>passjava<span class="token operator">-</span>question
<span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span>学习微服务<span class="token operator">|</span>passjava<span class="token operator">-</span>study
<span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span>渠道微服务<span class="token operator">|</span>passjava<span class="token operator">-</span>channel



### <span class="token number">4</span><span class="token punctuation">.</span>PassJava<span class="token operator">-</span>Platform添加Pom<span class="token punctuation">.</span>xml文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;?xml version&#x3D;”1.0” encoding&#x3D;”UTF-8”?&gt;<br>&lt;project xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://maven.apache.org/POM/4.0.0&quot;">http://maven.apache.org/POM/4.0.0&quot;</a> xmlns:xsi&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2001/XMLSchema-instance&quot;">http://www.w3.org/2001/XMLSchema-instance&quot;</a><br>         xsi:schemaLocation&#x3D;”<a target="_blank" rel="noopener" href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a> <a target="_blank" rel="noopener" href="https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;">https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</a>&gt;<br>    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;<br>    &lt;groupId&gt;com.jackson0714.passjava&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;passjava&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;<br>    &lt;name&gt;passjava&lt;&#x2F;name&gt;<br>    &lt;description&gt;佳必过-聚合服务&lt;&#x2F;description&gt;<br>    &lt;packaging&gt;pom&lt;&#x2F;packaging&gt;</p>
<p>    &lt;modules&gt;<br>        &lt;module&gt;passjava-content&lt;&#x2F;module&gt;<br>        &lt;module&gt;passjava-member&lt;&#x2F;module&gt;<br>        &lt;module&gt;passjava-question&lt;&#x2F;module&gt;<br>        &lt;module&gt;passjava-study&lt;&#x2F;module&gt;<br>        &lt;module&gt;passjava-channel&lt;&#x2F;module&gt;<br>    &lt;&#x2F;modules&gt;<br>&lt;&#x2F;project&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>添加根目录Maven 配置

Maven操作根项目就可以了，试下clean

### <span class="token number">6</span><span class="token punctuation">.</span> 配置<span class="token punctuation">.</span>gitignore文件

提交代码时，忽略某些文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="gradle"><a href="#gradle" class="headerlink" title="gradle ###"></a>gradle ###</h3><p>.gradle<br>&#x2F;build&#x2F;<br>!gradle&#x2F;wrapper&#x2F;gradle-wrapper.jar</p>
<h3 id="STS"><a href="#STS" class="headerlink" title="STS ###"></a>STS ###</h3><p>.settings&#x2F;<br>.apt_generated<br>.classpath<br>.factorypath<br>.project<br>.settings<br>.springBeans<br>bin&#x2F;</p>
<h3 id="IntelliJ-IDEA"><a href="#IntelliJ-IDEA" class="headerlink" title="IntelliJ IDEA ###"></a>IntelliJ IDEA ###</h3><p>.idea<br>*.iws<br>*.iml<br>*.ipr<br>rebel.xml</p>
<h3 id="NetBeans"><a href="#NetBeans" class="headerlink" title="NetBeans ###"></a>NetBeans ###</h3><p>nbproject&#x2F;private&#x2F;<br>build&#x2F;<br>nbbuild&#x2F;<br>dist&#x2F;<br>nbdist&#x2F;<br>.nb-gradle&#x2F;</p>
<h3 id="maven"><a href="#maven" class="headerlink" title="maven ###"></a>maven ###</h3><p>target&#x2F;<br>*.war<br>*.ear<br>*.zip<br>*.tar<br>*.tar.gz<br>**&#x2F;mvnw<br>**&#x2F;mvnw.cmd<br>**&#x2F;.mvn</p>
<h3 id="logs"><a href="#logs" class="headerlink" title="logs ####"></a>logs ####</h3><p>&#x2F;logs&#x2F;<br>*.log</p>
<h3 id="temp-ignore"><a href="#temp-ignore" class="headerlink" title="temp ignore ###"></a>temp ignore ###</h3><p>*.cache<br>*.diff<br>*.patch<br>*.tmp<br>*.java~<br>*.properties~<br>*.xml~</p>
<h3 id="system-ignore"><a href="#system-ignore" class="headerlink" title="system ignore ###"></a>system ignore ###</h3><p>.DS_Store<br>Thumbs.db<br>Servers<br>.metadata<br>upload<br>gen_code</p>
<h3 id="database"><a href="#database" class="headerlink" title="database ###"></a>database ###</h3><p>db&#x2F;db_back_dir&#x2F;</p>
<h3 id="redis"><a href="#redis" class="headerlink" title="redis ###"></a>redis ###</h3><p>&#x2F;redis&#x2F;</p>
<pre class="line-numbers language-java"><code class="language-java">

删除子项目的<span class="token punctuation">.</span>gitignore文件

### <span class="token number">7</span><span class="token punctuation">.</span>提交代码

可以用IDEA的git工具提交，也可以用git bash命令行提交
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>git add .<br>git commit -m ‘xxx’<br>git push origin master</p>
<pre class="line-numbers language-java"><code class="language-java">

## <span class="token number">5.2</span> 初始化数据库和表

### 用PowerDisigner工具创建数据库
<span class="token operator">-</span> 用PowerDisigner工具创建数据库
总共有<span class="token number">5</span>个微服务数据库：内容、学习、渠道、用户、题目
<span class="token operator">-</span> 内容微服务的数据库<span class="token operator">&lt;</span>li<span class="token operator">></span>学习微服务的数据库<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWZwcXdpYXNJT2JzZ09mUmVsMUZYZnppYllGdlJ6S1cyWkU1dVNsV3BBbFdpYklEWEdZeWppYW9xc2cvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    学习微服务的数据库
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>渠道微服务的数据库<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWFkN1M1QnNLN1RKaWNtWm1JV2pVOVBMNVZDeXFJTE1HMk5SM0l1aWN1ZUNnc1N1Q2lhQjFGN2VvZy82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    渠道微服务的数据库
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>用户微服务的数据库<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWhqcFZ3NEZtdmRsMWxwdFdmNTd4QWJybXZPUjhlc0VtenZ4N0liaWEzUW9GQ1BFU3J4VjhUYlEvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    用户微服务的数据库
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">-</span> 题目微服务的数据库
SQL文件在这个项目里面：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>Jackson0714<span class="token operator">/</span>PassJava<span class="token operator">-</span>Platform<span class="token punctuation">.</span>git

## <span class="token number">5.3</span> 搭建管理后台

<span class="token operator">></span> 
  “
  管理后台使用人人开源的后台管理框架，完成快速搭建。
  ”
 

### <span class="token number">1</span><span class="token punctuation">.</span>下载人人开源后台管理框架
<span class="token operator">-</span> renren<span class="token operator">-</span>fast
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>gitee<span class="token punctuation">.</span>com<span class="token operator">/</span>renrenio<span class="token operator">/</span>renren<span class="token operator">-</span>fast<span class="token punctuation">.</span>git
<span class="token operator">-</span> renren<span class="token operator">-</span>fast<span class="token operator">-</span>vue
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>gitee<span class="token punctuation">.</span>com<span class="token operator">/</span>renrenio<span class="token operator">/</span>renren<span class="token operator">-</span>fast<span class="token operator">-</span>vue<span class="token punctuation">.</span>git

### <span class="token number">2</span><span class="token punctuation">.</span>添加人人开源后端代码

PassJava项目

拷贝文件夹renren<span class="token operator">-</span>fast到PassJava根目录

POM文件 添加依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;module&gt;renren-fast&lt;&#x2F;module&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>初始化后台管理数据库
<span class="token operator">-</span> 创建数据库：passjava_admin<span class="token operator">-</span> 执行renren<span class="token operator">-</span>fast<span class="token operator">/</span>db<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sql脚本
### <span class="token number">4</span><span class="token punctuation">.</span>修改renren<span class="token operator">-</span>fast 服务的配置文件

文件路径：src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>application<span class="token operator">-</span>dev<span class="token punctuation">.</span>yml
<span class="token operator">-</span> 修改数据库连接为自己的mysql数据库连接
### <span class="token number">5</span><span class="token punctuation">.</span>启动renren<span class="token operator">-</span>fast服务
<span class="token operator">-</span> 配置SDK为<span class="token number">1.8</span>
<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybTJLTk5SaWNiU3hoZk1hUlJKaWJka0xmd05zeG50Vm9hZXJpYUlqUm1uclhuTW9xaDdrdVp1YnBrZy82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span><span class="token operator">-</span>
<span class="token operator">-</span> 运行renren<span class="token operator">-</span>fast后台<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybVdDc0JNOGV6UjdralZTV28wOElrc2szUHJQMTZRRWs0WmxQV3M1U2lhM2ZGaktyYnRJS2ZYOGcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
出现错误：com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>PacketTooBigException<span class="token operator">:</span> Packet <span class="token keyword">for</span> query is too large<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

解决方案：修改mysql容器的配置文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>cd &#x2F;mydata&#x2F;mysql&#x2F;conf<br>sudo vim my.cnf</p>
<p>添加配置，[mysqld_safe]如果有，则不需要添加<br>[mysqld_safe]<br>max_allowed_packet&#x3D;32M</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 执行结果<span class="token operator">&lt;</span>li<span class="token operator">></span>测试服务运行状态浏览器输入：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>renren<span class="token operator">-</span>fast<span class="token operator">/</span>显示结果：<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"msg"</span><span class="token operator">:</span><span class="token string">"invalid token"</span><span class="token punctuation">,</span><span class="token string">"code"</span><span class="token operator">:</span><span class="token number">401</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>结果如上所示，则表示服务运行正常。另外结果里面的invalid token说明权限不足，不是指服务不正常。<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
### <span class="token number">6</span><span class="token punctuation">.</span>启动前端项目
<span class="token operator">&lt;</span>li<span class="token operator">></span>配置cnpm<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>npm install <span class="token operator">-</span>g cnpm <span class="token operator">--</span>registry<span class="token operator">=</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>registry<span class="token punctuation">.</span>npm<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>org
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>安装node_modules依赖包<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>cnpm install
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>打包前端项目<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>npm run dev
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">-</span> 浏览后台http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8002</span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybUFST1lyeVBYMEpJYjZzeEpONlVQTUZESmxrMXk2dFNzaWFoemlhS04zMTNUS2tZQUNIWXRzRUt3LzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>cnpm install</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">7</span><span class="token punctuation">.</span>前后端联调登录
<span class="token operator">-</span> 登录后台账号：admin密码：admin登录成功<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybUIwNmlhRDZadnlWZmtXS3BnU1dLYXJNc2lhaFFxUXV3ZG1TS1hiNldWd2tVSFRuNWRtV0ZmU0h3LzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span><span class="token operator">-</span> 查看后端服务日志<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWszd3Nubktkb3BkZGZJaFFUMXR2UUFuTkg3b1B4Z01WSjgyR2xwaWF2T1I1aWFDbjZ4a0xoT0R3LzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
说明前端登录请求发送到了后端服务，并验证了用户名和密码是否正确。

## <span class="token number">5.4</span> 自动生成前后端代码

### <span class="token number">1</span><span class="token punctuation">.</span>下载代码生成器框架
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>git clone <a target="_blank" rel="noopener" href="https://gitee.com/renrenio/renren-generator.git">https://gitee.com/renrenio/renren-generator.git</a></p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>添加人人开源后端代码

PassJava项目

拷贝文件夹renren<span class="token operator">-</span>fast到PassJava根目录

POM文件 添加依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;module&gt;renren-generator&lt;&#x2F;module&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>修改renren<span class="token operator">-</span>generator服务的配置文件

（<span class="token number">1</span>）修改数据库链接 src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>application<span class="token operator">-</span>dev<span class="token punctuation">.</span>yml
<span class="token operator">-</span> 修改数据库连接为自己的mysql数据库连接<span class="token operator">&lt;</span>li<span class="token operator">></span>数据库名改为要生成代码的服务，如passjava_qms数据库<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">129.211</span><span class="token punctuation">.</span><span class="token number">188</span><span class="token punctuation">.</span>xxx<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>passjava_qms<span class="token operator">?</span>useUnicode<span class="token operator">=</span><span class="token boolean">true</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>characterEncoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>useSSL<span class="token operator">=</span><span class="token boolean">false</span>
username<span class="token operator">:</span> root
password<span class="token operator">:</span> root
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
（<span class="token number">2</span>）修改属性配置文件 src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>generator<span class="token punctuation">.</span>properties
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="以question微服务为例"><a href="#以question微服务为例" class="headerlink" title="以question微服务为例"></a>以question微服务为例</h1><p>mainPath&#x3D;com.jackson0714<br>package&#x3D;com.jackson0714.passjava<br>moduleName&#x3D;question<br>author&#x3D;jackson0714<br>email&#x3D;<a href="mailto:&#x6a;&#x61;&#x63;&#x6b;&#x73;&#111;&#110;&#x30;&#53;&#x38;&#53;&#64;&#49;&#x36;&#51;&#46;&#99;&#111;&#x6d;">&#x6a;&#x61;&#x63;&#x6b;&#x73;&#111;&#110;&#x30;&#53;&#x38;&#53;&#64;&#49;&#x36;&#51;&#46;&#99;&#111;&#x6d;</a><br>tablePrefix&#x3D;qms_</p>
<pre class="line-numbers language-java"><code class="language-java">

（<span class="token number">3</span>）修改controller 模板文件

src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>template<span class="token operator">/</span>Controller<span class="token punctuation">.</span>java<span class="token punctuation">.</span>vm

删除引入的包，后面再引入
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>import org.apache.shiro.authz.annotation.RequiresPermissions;</p>
<pre class="line-numbers language-java"><code class="language-java">

注释RequiresPermissions注解，后面再引入
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@RequiresPermissions(“${moduleName}:${pathName}:list”)</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>启动代码生成器服务

浏览器打开localhost，可以看到数据库qms的两张表已经显示在后台了

### <span class="token number">5</span><span class="token punctuation">.</span>生成代码
<span class="token operator">-</span> 生成代码<span class="token operator">-</span> 拷贝main文件夹到question模块src目录<span class="token operator">-</span> 删除前端代码passjava<span class="token operator">-</span>question\src\main\resources\src目录<span class="token operator">&lt;</span>li<span class="token operator">></span>代码结构<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybTFTVFFaTlJ0cnV0UzJDRjNPejFXUHRyNHM3TFF4b2dkWmVxejZYTFpqWkdCdmdVaWJpYmNHbVJ3LzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    代码结构
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
生成的代码包含controller，dao层，实体类，接口实现类，mapper映射文件

### <span class="token number">6</span><span class="token punctuation">.</span>添加common 模块

因为自动生成的代码引用了一些工具类，而我们的项目中没有，所以需要加个common模块添加一些工具类
<span class="token operator">&lt;</span>li<span class="token operator">></span>添加passjava<span class="token operator">-</span>commonNew Module<span class="token operator">:</span> 选择Maven<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWNKWmRRd015NjhnRDVtck5yMGdLc2VLWTBZNkthUjV0Mk03cVNYY2liQUtzWkc1ZGN6Mzl3ZmcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    选择Maven
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
Name<span class="token operator">:</span> passjava<span class="token operator">-</span>common

### <span class="token number">7</span><span class="token punctuation">.</span>question模块添加common模块依赖

pom文件添加依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;com.jackson0714.passjava&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;passjava-common&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">8</span><span class="token punctuation">.</span>common模块添加依赖
<span class="token operator">&lt;</span>li<span class="token operator">></span>MyBatis<span class="token operator">-</span>Plus<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">!</span><span class="token operator">--</span>mybatis<span class="token operator">-</span>plus DAO层工具 https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mp<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token operator">--</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>com<span class="token punctuation">.</span>baomidou<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>mybatis<span class="token operator">-</span>plus<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token number">3.2</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>lombok依赖<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">!</span><span class="token operator">--</span>lombok 不需要写getter<span class="token punctuation">,</span>setter方法了<span class="token operator">--</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>lombok<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token number">1.18</span><span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>httpcore依赖<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">!</span><span class="token operator">--</span>httpcore 依赖<span class="token operator">--</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>httpcomponents<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>httpcore<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token number">4.4</span><span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>commons<span class="token operator">-</span>lang依赖<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">!</span><span class="token operator">--</span>commons<span class="token operator">-</span>lang 依赖 <span class="token operator">--</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>commons<span class="token operator">-</span>lang<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>commons<span class="token operator">-</span>lang<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token number">2.6</span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>servlet依赖<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">!</span><span class="token operator">--</span>  导入servlet<span class="token operator">-</span>api 依赖  <span class="token operator">--</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>javax<span class="token punctuation">.</span>servlet<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>servlet<span class="token operator">-</span>api<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token number">2.5</span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>scope<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>provided<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>scope<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;!–lombok 不需要写getter,setter方法了–&gt;<br>&lt;dependency&gt;<br>  &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;1.18.12&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&lt;!–commons-lang 依赖 –&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;commons-lang&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;commons-lang&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;2.6&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">9</span><span class="token punctuation">.</span>common模块添加工具类
<span class="token operator">-</span> 添加包com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>common<span class="token punctuation">.</span>utils<span class="token operator">-</span> 从renren<span class="token operator">-</span>fast项目copy文件`Constans<span class="token punctuation">.</span>java`、`PageUtils<span class="token punctuation">.</span>java`、`Query<span class="token punctuation">.</span>java`、`R<span class="token punctuation">.</span>java`、`RRException<span class="token punctuation">.</span>java`<span class="token operator">-</span> 添加包`com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>common<span class="token punctuation">.</span>xss`<span class="token operator">-</span> 从renren<span class="token operator">-</span>fast项目copy文件`HTMLFilter<span class="token punctuation">.</span>java`、`SQLFilter<span class="token punctuation">.</span>java`
## <span class="token number">5.5</span> 整合MyBatis<span class="token operator">-</span>Plus实现CRUD

### <span class="token number">1</span><span class="token punctuation">.</span>添加Mybatis<span class="token operator">-</span>Plus依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;3.2.0&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>配置数据源
<span class="token operator">-</span> 导入数据库的驱动<span class="token operator">-</span> <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>查看mysql版本 <span class="token number">5.7</span><span class="token punctuation">.</span><span class="token number">29</span>
到maven仓库查看适用的mysql驱动，<span class="token number">5.7</span>的没有，<span class="token number">8.0</span>兼容<span class="token number">5.7</span>的，所以选择<span class="token number">8.0</span>的驱动
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;!–添加mysql驱动–&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;8.0.17&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>配置MyBatis<span class="token operator">-</span>Plus
<span class="token operator">&lt;</span>li<span class="token operator">></span>添加application<span class="token punctuation">.</span>yml 文件配置数据源文件路径：<span class="token operator">/</span>passjava<span class="token operator">-</span>question<span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>application<span class="token punctuation">.</span>yml<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>spring<span class="token operator">:</span>
  datasource<span class="token operator">:</span>
      driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">:</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
      url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">129.211</span><span class="token punctuation">.</span><span class="token number">188</span><span class="token punctuation">.</span>xxx<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>passjava_admin<span class="token operator">?</span>useUnicode<span class="token operator">=</span><span class="token boolean">true</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>characterEncoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>serverTimezone<span class="token operator">=</span>Asia<span class="token operator">/</span>Shanghai
      username<span class="token operator">:</span> root
      password<span class="token operator">:</span> xxx
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>配置mapper映射文件路径<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWh6QldZamJadmlha2ZidlRiYXZQZTFRTkxpYUR5MmJoR2NoTjl1allIWDU1dVFKVENUUXhBQXFRLzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    配置mabatis<span class="token operator">-</span>plus时的智能提示
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>mybatis<span class="token operator">-</span>plus<span class="token operator">:</span>
  mapper<span class="token operator">-</span>locations<span class="token operator">:</span> classpath<span class="token operator">:</span><span class="token operator">/</span>mapper<span class="token comment" spellcheck="true">/**/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml
  global<span class="token operator">-</span>config<span class="token operator">:</span>
    db<span class="token operator">-</span>config<span class="token operator">:</span>
      id<span class="token operator">-</span>type<span class="token operator">:</span> auto
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>添加MapperScan注解<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"com.jackson0714.passjava.question.dao"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PassjavaQuestionApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>PassjavaQuestionApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>mybatis-plus:<br>  mapper-locations: classpath:&#x2F;mapper&#x2F;**&#x2F;*.xml<br>  global-config:<br>    db-config:<br>      id-type: auto</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>测试mybatis<span class="token operator">-</span>plus的CRUD方法
<span class="token operator">&lt;</span>li<span class="token operator">></span>创建类型为javaBasic的type表数据<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token annotation punctuation">@Autowired</span>
TypeService typeService<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 创建题目类型</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testCreateType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    TypeEntity typeEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    typeEntity<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">"javaBasic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    typeService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>typeEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"创建成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybVJFWU5vR1MzbDhLaWNURWQ5ZGxHbFRHNmVPQng3aWFteWlhZlNHSzdqNnJxSVR0VnJReGlhYjU5WWcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    创建类型为javaBasic的type表数据
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>更新id<span class="token operator">=</span><span class="token number">1</span>的表数据<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token comment" spellcheck="true">// 更新type=jvm</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testUpdateType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    TypeEntity typeEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    typeEntity<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>1L<span class="token punctuation">)</span><span class="token punctuation">;</span>
    typeEntity<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">"jvm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    typeService<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>typeEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"修改成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWZOU3RmTXc3Q0ZaWXkwTGJiYm9lVUxSRkUwckVNY1BKZHVSaWJUaWE1bk81ZnIwVlk4ZWtRWnlnLzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    更新id<span class="token operator">=</span><span class="token number">1</span>的表数据
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>查询id<span class="token operator">=</span><span class="token number">1</span>的表数据<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token comment" spellcheck="true">// 查询题目类型</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testSelectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    List<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>TypeEntity<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span> typeEntityList <span class="token operator">=</span> typeService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>TypeEntity<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span>1L<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    typeEntityList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"查询成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;&#x2F; 更新type&#x3D;jvm<br>@Test<br>void testUpdateType() {<br>    TypeEntity typeEntity &#x3D; new TypeEntity();<br>    typeEntity.setId(1L);<br>    typeEntity.setType(“jvm”);<br>    typeService.updateById(typeEntity);<br>    System.out.println(“修改成功”);<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">&lt;</span>li<span class="token operator">></span>删除id<span class="token operator">=</span><span class="token number">1</span>的表数据<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token comment" spellcheck="true">// 删除题目类型记录</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testRemoveType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    typeService<span class="token punctuation">.</span><span class="token function">removeById</span><span class="token punctuation">(</span>1L<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"删除成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
## <span class="token number">5.6</span> 生成所有微服务的CRUD代码

### <span class="token number">1</span><span class="token punctuation">.</span> 修改代码生成器配置文件

（<span class="token number">1</span>）\renren<span class="token operator">-</span>generator\src\main\resources\generator<span class="token punctuation">.</span>properties
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>mainPath&#x3D;com.jackson0714<br>package&#x3D;com.jackson0714.passjava<br>moduleName&#x3D;channel<br>author&#x3D;jackson0714<br>email&#x3D;<a href="mailto:&#x6a;&#97;&#99;&#x6b;&#115;&#x6f;&#110;&#48;&#x35;&#56;&#53;&#x40;&#49;&#54;&#x33;&#46;&#99;&#111;&#x6d;">&#x6a;&#97;&#99;&#x6b;&#115;&#x6f;&#110;&#48;&#x35;&#56;&#53;&#x40;&#49;&#54;&#x33;&#46;&#99;&#111;&#x6d;</a><br>tablePrefix&#x3D;chms_</p>
<pre class="line-numbers language-java"><code class="language-java">

（<span class="token number">2</span>）\renren<span class="token operator">-</span>generator\src\main\resources\application<span class="token punctuation">.</span>yml

修改连接的数据库：passjava_chms

### <span class="token number">2</span><span class="token punctuation">.</span>生成渠道微服务代码

启动服务，打开浏览器：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8003</span><span class="token operator">/</span>#generator<span class="token punctuation">.</span>html

注意：端口地址默认是<span class="token number">8080</span>，我配置成了<span class="token number">8003</span>。

### <span class="token number">3</span><span class="token punctuation">.</span>添加生成的代码
<span class="token operator">-</span> 删除自动生成的代码中的文件夹：main\resources\src<span class="token operator">-</span> 拷贝main文件夹到channel模块src目录下
### <span class="token number">4</span><span class="token punctuation">.</span>配置渠道微服务
<span class="token operator">&lt;</span>li<span class="token operator">></span>pom<span class="token punctuation">.</span>xml引入common模块<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>passjava<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>groupId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>passjava<span class="token operator">-</span>common<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>artifactId<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span><span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>version<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>dependency<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>添加application<span class="token punctuation">.</span>yml<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>spring<span class="token operator">:</span>
  datasource<span class="token operator">:</span>
      driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">:</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
      url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">129.211</span><span class="token punctuation">.</span><span class="token number">188</span><span class="token punctuation">.</span>xxx<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>passjava_chms<span class="token operator">?</span>useUnicode<span class="token operator">=</span><span class="token boolean">true</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>characterEncoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>serverTimezone<span class="token operator">=</span>Asia<span class="token operator">/</span>Shanghai
      username<span class="token operator">:</span> root
      password<span class="token operator">:</span> xxx

mybatis<span class="token operator">-</span>plus<span class="token operator">:</span>
  mapper<span class="token operator">-</span>locations<span class="token operator">:</span> classpath<span class="token operator">:</span><span class="token operator">/</span>mapper<span class="token comment" spellcheck="true">/**/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml
  global<span class="token operator">-</span>config<span class="token operator">:</span>
    db<span class="token operator">-</span>config<span class="token operator">:</span>
      id<span class="token operator">-</span>type<span class="token operator">:</span> auto
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">5</span><span class="token punctuation">.</span>测试channel服务接口访问：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8000</span><span class="token operator">/</span>channel<span class="token operator">/</span>channel<span class="token operator">/</span>list返回：<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token string">"msg"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span><span class="token string">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"page"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">"totalCount"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"pageSize"</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"totalPage"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"currPage"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"list"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>  datasource:<br>      driver-class-name: com.mysql.cj.jdbc.Driver<br>      url: jdbc:mysql:&#x2F;&#x2F;129.211.188.xxx:3306&#x2F;passjava_chms?useUnicode&#x3D;true&amp;characterEncoding&#x3D;UTF-8&amp;serverTimezone&#x3D;Asia&#x2F;Shanghai<br>      username: root<br>      password: xxx</p>
<p>mybatis-plus:<br>  mapper-locations: classpath:&#x2F;mapper&#x2F;**&#x2F;*.xml<br>  global-config:<br>    db-config:<br>      id-type: auto</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>生成所有微服务的CRUD代码

### <span class="token number">6</span><span class="token punctuation">.</span>配置微服务端口
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>passjava-channel  端口8000<br>passjava-content  端口9000<br>passjava-member 端口10000<br>passjava-question 端口11000<br>passjava-study 端口12000</p>
<pre class="line-numbers language-java"><code class="language-java">

所有微服务都启动成功并测试接口通过
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="http://localhost:8000/channel/channel/list">http://localhost:8000/channel/channel/list</a><br><a target="_blank" rel="noopener" href="http://localhost:9000/content/banner/list">http://localhost:9000/content/banner/list</a><br><a target="_blank" rel="noopener" href="http://localhost:10000/member/member/list">http://localhost:10000/member/member/list</a><br><a target="_blank" rel="noopener" href="http://localhost:11000/question/question/list">http://localhost:11000/question/question/list</a><br><a target="_blank" rel="noopener" href="http://localhost:12000/study/studytime/list">http://localhost:12000/study/studytime/list</a></p>
<pre class="line-numbers language-java"><code class="language-java">

## <span class="token number">5.7</span> 管理后台<span class="token operator">-</span>题目类型功能

### <span class="token number">1</span><span class="token punctuation">.</span>环境准备
<span class="token operator">-</span> 代码准备将renren<span class="token operator">-</span>fast<span class="token operator">-</span>vue代码copy到自己的前端项目中<span class="token operator">-</span> 安装node_module
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>cnpm install</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 启动前端portal
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>npm run dev</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">&lt;</span>li<span class="token operator">></span>登陆后台<span class="token number">1</span><span class="token punctuation">.</span>启动RenrenAplication2<span class="token punctuation">.</span>输入用户名和密码登陆<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWlidnMxNFJnV2Z6NWdVcHRwUDFUa3RSVldRMVRveFN1RDcxVmtlVEVoaWFhZTVCZlBXODY3RUR3LzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    PassJava后台
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
### <span class="token number">2</span><span class="token punctuation">.</span> 添加目录和菜单
<span class="token operator">-</span> 添加`题目中心`目录<span class="token punctuation">(</span>一级菜单<span class="token punctuation">)</span>
刷新页面<span class="token punctuation">,</span>就可以看到题目中心菜单
<span class="token operator">-</span> 添加题目`类型维护`菜单<span class="token punctuation">(</span>二级菜单<span class="token punctuation">)</span>
可以看到数据库新增了两条记录<span class="token punctuation">,</span>分别对应两个菜单

点击类型维护菜单<span class="token punctuation">,</span>打开了链接<span class="token operator">:</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8002</span><span class="token operator">/</span>#<span class="token operator">/</span>question<span class="token operator">-</span>type<span class="token punctuation">,</span>页面显示空白页面<span class="token punctuation">.</span>

### <span class="token number">3</span><span class="token punctuation">.</span>自动生成前端页面

用renren<span class="token operator">-</span>generator自动生成前端代码<span class="token punctuation">,</span>可以参考这篇<span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">.</span>SpringCloud实战项目<span class="token operator">-</span>自动生成前后端代码

拷贝question目录到前端目录 \src\views\modules

### <span class="token number">4</span><span class="token punctuation">.</span> 测试类型维护功能

点击类型维护菜单<span class="token punctuation">,</span>可以看到请求报<span class="token number">404</span>

http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>renren<span class="token operator">-</span>fast<span class="token operator">/</span>question<span class="token operator">/</span>type<span class="token operator">/</span>list<span class="token operator">?</span>t<span class="token operator">=</span><span class="token number">1587825969456</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>page<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>limit<span class="token operator">=</span><span class="token number">10</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span>key<span class="token operator">=</span>

<span class="token operator">></span> 
  “
  因为页面的请求都访问到renren<span class="token operator">-</span>fast服务了<span class="token punctuation">,</span>所以要修改为访问题目微服务。但是前端有很多请求访问的是不同的服务，所以我们可以通过网关来作为请求的入口，然后将不同的请求路由到不同的服务。
  ”
 

SpringCloud整合网关可以看之前写的一篇文章：<span class="token number">20</span><span class="token punctuation">.</span>SpringCloud整合Gateway网关

### <span class="token number">5</span><span class="token punctuation">.</span>配置请求到网关

文件：\<span class="token keyword">static</span>\config\index<span class="token punctuation">.</span>js

api接口请求地址替换为gateway的地址
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>window.SITE_CONFIG[‘baseUrl’] &#x3D; ‘<a target="_blank" rel="noopener" href="http://localhost:8080/renren-fast&#39;">http://localhost:8080/renren-fast&#39;</a>;<br>替换为<br>window.SITE_CONFIG[‘baseUrl’] &#x3D; ‘<a href="http://localhost:8060&#39;">http://localhost:8060&#39;</a>; &#x2F;&#x2F; 网关地址</p>
<pre class="line-numbers language-java"><code class="language-java">

刷新页面，发现会回到登录页面，而且验证码获取不到，F12调试工具可以看到验证码请求发送到网关上，而网关上找不到这个请求地址<span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8060</span><span class="token operator">/</span>captcha<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span>，所以报<span class="token number">404</span>。其实验证码请求应该访问renren<span class="token operator">-</span>fast服务，所以我们要将验证码请求通过网关转发到renren<span class="token operator">-</span>fast服务<span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>renren<span class="token operator">-</span>fast<span class="token operator">/</span>captcha<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span>。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h1 id="验证码请求："><a href="#验证码请求：" class="headerlink" title="验证码请求："></a>验证码请求：</h1><p>GET <a target="_blank" rel="noopener" href="http://localhost:8060/captcha.jpg?uuid=1ce21f53-1866-40b1-8b20-2f4515d59f0d">http://localhost:8060/captcha.jpg?uuid=1ce21f53-1866-40b1-8b20-2f4515d59f0d</a> 404 (Not Found)</p>
<pre class="line-numbers language-java"><code class="language-java">

<span class="token operator">></span> 
  “
  可以将renren<span class="token operator">-</span>fast注册到注册中心，然后通过网关将请求转发到renren<span class="token operator">-</span>fast服务。
  ”
 

### <span class="token number">6</span><span class="token punctuation">.</span>注册renren<span class="token operator">-</span>fast服务
<span class="token operator">-</span> renren<span class="token operator">-</span>fast项目添加common依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;com.jackson0714.passjava&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;passjava-common&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 配置注册中心地址
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>cloud:<br>  nacos:<br>    discovery:<br>      server-addr: 127.0.0.1:8848</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 配置应用程序的名称
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>application:<br>  name: renren-fast</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 应用类添加`<span class="token annotation punctuation">@EnableDiscoveryClient</span>`注解<span class="token operator">-</span> 查看服务是否注册成功
### <span class="token number">7</span><span class="token punctuation">.</span> 添加网关路由规则
<span class="token operator">-</span> 配置路由规则
passjava<span class="token operator">-</span>gateway项目中application<span class="token punctuation">.</span>yml文件配置路由规则，并重启passjava<span class="token operator">-</span>gateway服务
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>  cloud:<br>    gateway:<br>      routes:<br>        - id: route_portal # 路由规则id<br>          uri: lb:&#x2F;&#x2F;renren-fast # 负载均衡，renren-fast服务<br>          predicates: # 断言<br>            - Path&#x3D;&#x2F;api&#x2F;** # 如果前端请求路径包含 api，则应用这条路由规则<br>          filters: #过滤器<br>            - RewritePath&#x3D;&#x2F;api&#x2F;(?&lt;segment&gt;.*),&#x2F;renren-fast&#x2F;${segment} # 将访问路径中包含的api替换成renren-fast，但是替换的url不会在前端显示，还是网关的访问路径。这里不是跳转到新的路径，而是转发请求。</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 修改前端请求路径
文件：\<span class="token keyword">static</span>\config\index<span class="token punctuation">.</span>js

请求路径添加`api`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p> window.SITE_CONFIG[‘baseUrl’] &#x3D; ‘<a href="http://localhost:8086&#39;">http://localhost:8086&#39;</a>;<br> 替换为<br> window.SITE_CONFIG[‘baseUrl’] &#x3D; ‘<a target="_blank" rel="noopener" href="http://localhost:8060/api&#39;">http://localhost:8060/api&#39;</a>; &#x2F;&#x2F; 添加api</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 刷新登录页面，可以正常获取验证码，请求路径为网关地址 <span class="token operator">+</span> <span class="token operator">/</span>api<span class="token operator">/</span>captcha
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="http://localhost:8060/api/captcha.jpg?uuid=84d36089-07ae-4201-85c0-8217b032f21b">http://localhost:8060/api/captcha.jpg?uuid=84d36089-07ae-4201-85c0-8217b032f21b</a></p>
<pre class="line-numbers language-java"><code class="language-java">

<span class="token operator">></span> 
  “
  前端将请求发送到网关http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8060</span><span class="token operator">/</span>api<span class="token operator">/</span>captcha<span class="token punctuation">.</span>jpg，网关将请求转发到http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8060</span><span class="token operator">/</span>api<span class="token operator">/</span>renren<span class="token operator">-</span>fast<span class="token operator">/</span>captcha<span class="token punctuation">.</span>jpg。
  ”
 
<span class="token operator">-</span> 登录，报跨域问题
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Access to XMLHttpRequest at ‘<a target="_blank" rel="noopener" href="http://localhost:8060/api/sys/login&#39;">http://localhost:8060/api/sys/login&#39;</a> from origin ‘<a href="http://localhost:8002&#39;">http://localhost:8002&#39;</a> has been blocked by CORS policy: Response to preflight request doesn’t pass access control check: No ‘Access-Control-Allow-Origin’ header is present on the requested resource.</p>
<pre class="line-numbers language-java"><code class="language-java">

<span class="token operator">></span> 
  “
  登录页面url：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8002</span>，点击登录访问的请求url：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8060</span><span class="token operator">/</span>api<span class="token operator">/</span>sys<span class="token operator">/</span>login，两个url的端口号不一样，产生了跨域问题。
  ”
 

### <span class="token number">8</span><span class="token punctuation">.</span>跨域问题
<span class="token operator">-</span> 跨域资源共享<span class="token punctuation">(</span>CORS<span class="token punctuation">)</span> 是一种机制，它使用额外的 HTTP 头来告诉浏览器 让运行在一个 <span class="token function">origin</span> <span class="token punctuation">(</span>domain<span class="token punctuation">)</span> 上的Web应用被准许访问来自不同源服务器上的指定的资源。当一个资源从与该资源本身所在的服务器不同的域、协议或端口请求一个资源时，资源会发起一个跨域 HTTP 请求。<span class="token operator">-</span> 比如，站点 http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>domain<span class="token operator">-</span>a<span class="token punctuation">.</span>com 的某 HTML 页面通过  的 src 请求 http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>domain<span class="token operator">-</span>b<span class="token punctuation">.</span>com<span class="token operator">/</span>image<span class="token punctuation">.</span>jpg。网络上的许多页面都会加载来自不同域的CSS样式表，图像和脚本等资源。<span class="token operator">&lt;</span>li<span class="token operator">></span>出于安全原因，浏览器限制从脚本内发起的跨源HTTP请求。例如，XMLHttpRequest和Fetch API遵循同源策略。这意味着使用这些API的Web应用程序只能从加载应用程序的同一个域请求HTTP资源，除非响应报文包含了正确CORS响应头。<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybUt5c2lja1N5aWNKRU9IQk9TY21oMVBXR0dWRFNsVXlSZXpCWGFnTVhsaG5tMUdwaWM4VDVVdGFqdy82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    跨域场景
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
### <span class="token number">9</span><span class="token punctuation">.</span>解决跨域问题
<span class="token operator">-</span> 添加响应头，配置当次请求允许跨域<span class="token operator">-</span> <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin：支持哪些来源的请求跨域<span class="token operator">-</span> Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Methods：支持哪些方法跨域<span class="token operator">-</span> Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Credentials：跨域请求默认不包含cookie，设置为<span class="token boolean">true</span>可以包含cookie<span class="token operator">-</span> Access<span class="token operator">-</span>Control<span class="token operator">-</span>Expose<span class="token operator">-</span>Headers：跨域请求暴露的字段CORS请求时，XMLHttpRequest对象的<span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法只能拿到<span class="token number">6</span>个基本字段：Cache<span class="token operator">-</span>Control、Content<span class="token operator">-</span>Language、Content<span class="token operator">-</span>Type、Expires、Last<span class="token operator">-</span>Modified、Pragma。如果想拿到其他字段，就必须在Access<span class="token operator">-</span>Control<span class="token operator">-</span>Expose<span class="token operator">-</span>Headers里面指定。<span class="token operator">-</span> Access<span class="token operator">-</span>Control<span class="token operator">-</span>Max<span class="token operator">-</span>Age：表明该响应的有效时间为多少秒。在有效时间内，浏览器无 须为同一请求再次发起预检请求。请注意，浏览器自身维护了一个最大有效时间，如果 该首部字段的值超过了最大有效时间，将不会生效。
添加跨域配置

passjava<span class="token operator">-</span>gateway应用中添加配置类PassJavaCorsConfiguration<span class="token punctuation">.</span>java
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>package com.jackson0714.passjava.gateway.config;</p>
<p>import org.springframework.context.annotation.Bean;<br>import org.springframework.context.annotation.Configuration;<br>import org.springframework.web.cors.CorsConfiguration;<br>import org.springframework.web.cors.reactive.CorsWebFilter;<br>import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;</p>
<p>@Configuration<br>public class PassJavaCorsConfiguration {</p>
<p>    @Bean<br>    public CorsWebFilter corsWebFilter() {<br>        UrlBasedCorsConfigurationSource source &#x3D; new UrlBasedCorsConfigurationSource();</p>
<p>        CorsConfiguration corsConfiguration &#x3D; new CorsConfiguration();</p>
<p>        &#x2F;&#x2F; 配置跨域<br>        corsConfiguration.addAllowedHeader(“<em>“); &#x2F;&#x2F; 允许所有请求头跨域<br>        corsConfiguration.addAllowedMethod(“</em>“); &#x2F;&#x2F; 允许所有请求方法跨域<br>        corsConfiguration.addAllowedOrigin(“*”); &#x2F;&#x2F; 允许所有请求来源跨域<br>        corsConfiguration.setAllowCredentials(true); &#x2F;&#x2F;允许携带cookie跨域，否则跨域请求会丢失cookie信息</p>
<p>        source.registerCorsConfiguration(“&#x2F;**”, corsConfiguration);</p>
<p>        return new CorsWebFilter(source);<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 注释renren<span class="token operator">-</span>fast里面的跨域配置文件路径：src<span class="token operator">/</span>main<span class="token operator">/</span>java<span class="token operator">/</span>io<span class="token operator">/</span>renren<span class="token operator">/</span>config<span class="token operator">/</span>CorsConfig<span class="token punctuation">.</span>java<span class="token operator">-</span> 登录成功可以看到login请求的响应报文中包含了已配置的CORS响应头
### <span class="token number">10</span><span class="token punctuation">.</span>配置题目服务的路由规则

我们访问题目中心的类型页面，发现还是报<span class="token number">404</span>找不到资源

所以我们需要配置题目服务的路由规则，将题目中心的页面请求经网关转发到题目服务。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>  cloud:<br>    gateway:<br>      routes:<br>        - id: route_question # 题目微服务路由规则<br>          uri: lb:&#x2F;&#x2F;passjava-question # 负载均衡，将请求转发到注册中心注册的renren-fast服务<br>          predicates: # 断言<br>            - Path&#x3D;&#x2F;api&#x2F;question&#x2F;** # 如果前端请求路径包含 api&#x2F;question，则应用这条路由规则<br>          filters: #过滤器<br>            - RewritePath&#x3D;&#x2F;api&#x2F;(?&lt;segment&gt;.*),&#x2F;${segment} # 将跳转路径中包含的api替换成question</p>
<pre class="line-numbers language-java"><code class="language-java">

<span class="token operator">></span> 
  “
  注意：若predicates的Path更精确，则将路由规则放到更上面，优先命中更上面的路由规则。
  ”
 

### <span class="token number">11</span><span class="token punctuation">.</span>测试类型维护功能
<span class="token operator">-</span> 数据库插入<span class="token number">3</span>条测试数据<span class="token operator">&lt;</span>li<span class="token operator">></span>测试查询列表，可以看到有三条记录查询出来了<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybUJhQnVFNUE2VHUwekRtRXVUbmp3ZkVybW5vVmRGcUpqUU9pYVJsY2JlVU9VTk1saWJJUmdiUFNRLzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    类型维护页面
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>测试修改一条数据，可以看到数据库里面记录更新为<span class="token number">23</span>了<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWZJeENoUkRNTmJrclA5cVBkck1VU1pzN2diTVFFeFBCNlVHaWM5YmxYcXFXZ3RQM1Z6OUJDTWcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    修改类型logo
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">-</span> 测试删除一条数据，可以看到界面和数据库都删除了一条数据<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybXpRdzh6RDU0Y2NpY0JpY2RpYllDaWNFd01wUFdnclFrMDdSU0lGbTVaOWlhNmhlaWEyUVFwejJKOGYyZy82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span>
### <span class="token number">12</span><span class="token punctuation">.</span>打开新增和批量删除功能

注释权限判断，默认返回<span class="token boolean">true</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;&#x2F; src\utils\index.js<br>&#x2F;**<br> * 是否有权限<br> * @param {*} key<br> *&#x2F;<br>export function isAuth (key) {<br>  &#x2F;&#x2F; return JSON.parse(sessionStorage.getItem(‘permissions’) || ‘[]’).indexOf(key) !&#x3D;&#x3D; -1 || false<br>  return true<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

## <span class="token number">5.8</span> 管理后台<span class="token operator">-</span>题目维护功能

### <span class="token number">1</span><span class="token punctuation">.</span>配置逻辑删除
<span class="token operator">&lt;</span>li<span class="token operator">></span>所有表字段添加del_flag字段<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>del_flag <span class="token function">tinyint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> DEFAULT <span class="token number">0</span> COMMENT <span class="token string">'删除标记（0-正常，1-删除）'</span><span class="token punctuation">,</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">-</span> MyBatisPlus配置逻辑删除
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>mybatis-plus:<br>  mapper-locations: classpath:&#x2F;mapper&#x2F;**&#x2F;*.xml<br>  global-config:<br>    db-config:<br>      id-type: auto<br>      logic-delete-field: delFlag  #全局逻辑删除字段值 3.3.0开始支持，详情看下面。<br>      logic-delete-value: 1 # 逻辑已删除值(默认为 1)<br>      logic-not-delete-value: 0 # 逻辑未删除值(默认为 0)</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> log中打印查询SQL语句
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>SELECT id,type,comments,logo_url,del_flag,create_time,update_time FROM qms_type WHERE del_flag&#x3D;0 </p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> log打印删除SQL语句
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>UPDATE qms_type SET del_flag&#x3D;1 WHERE id IN ( 1 ) AND del_flag&#x3D;0 </p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>快速显示开关

想要将是否显示改为快速开关
<span class="token operator">-</span> 自定义列模板<span class="token number">1</span><span class="token punctuation">.</span>通过 `Scoped slot` 可以获取到 row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> $index 和 store（table 内部的状态管理）的数据<span class="token number">2</span><span class="token punctuation">.</span>使用Switch开关
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Scoped slot：<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/table">https://element.eleme.cn/#/zh-CN/component/table</a><br>Switch开关：<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/switch">https://element.eleme.cn/#/zh-CN/component/switch</a></p>
<p>&lt;el-table-column prop&#x3D;”enable”<br>                 header-align&#x3D;”center”<br>                 align&#x3D;”center”<br>                 label&#x3D;”是否显示”&gt;<br>    &lt;template slot-scope&#x3D;”scope”&gt;<br>&lt;el-switch<br>           v-model&#x3D;”scope.row.enable”<br>           :active-value&#x3D;1<br>           :inactive-value&#x3D;0<br>           active-color&#x3D;”#13ce66”<br>           inactive-color&#x3D;”#ff4949”<br>           @change&#x3D;”updateQuestionStatus(scope.row)”&gt;<br>        &lt;&#x2F;el-switch&gt;<br>    &lt;&#x2F;template&gt;<br>&lt;&#x2F;el-table-column&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

添加更新方法
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;&#x2F; 更新题目是否显示<br>updateQuestionStatus(data) {<br>    console.log(data)<br>    let {id, enable} &#x3D; data<br>    this.$http({<br>        url: this.$http.adornUrl(‘&#x2F;question&#x2F;question&#x2F;update’),<br>        method: ‘post’,<br>        data: this.$http.adornData({id, enable}, false)<br>    }).then(({ data }) &#x3D;&gt; {<br>        this.$message({<br>            type:”success”,<br>            message: “状态更新成功”<br>        })<br>    });<br>},</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>前端字段校验

对排序字段限制：必须为正整数
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>dataRule: {<br>  displayOrder: [<br>    {<br>      validator: (rule, value, callback) &#x3D;&gt; {<br>        if (value &#x3D;&#x3D; “”) {<br>          callback(new Error(“排序字段必须填写”));<br>        } else if (!Number.isInteger(value) || value&lt;0) {<br>          callback(new Error(“排序必须是一个大于等于0的整数”));<br>        } else {<br>          callback();<br>        }<br>      },<br>      trigger: “blur”<br>    }<br>  ]<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>后端字段校验
<span class="token operator">-</span> 实体类字段上添加注解`<span class="token annotation punctuation">@Positive</span>`必须是大于<span class="token number">0</span>的数字
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;**<br> * 排序<br> *&#x2F;<br>@Positive<br>private Integer displayOrder;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> API 添加注解`<span class="token annotation punctuation">@Valid</span>`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x2F;**<br>* 保存<br>*&#x2F;<br>@RequestMapping(“&#x2F;save”)<br>public R save(@Valid @RequestBody QuestionEntity question){<br> questionService.save(question);<br> return R.ok();<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

测试结果

<span class="token operator">-</span><span class="token number">1</span>，<span class="token number">0</span>，<span class="token number">0.2</span> 不通过

测试<span class="token number">1</span>，<span class="token number">1.2</span>通过

### <span class="token number">5</span><span class="token punctuation">.</span>模糊查询题目列表

修改实现类`QuestionServiceImpl`的`queryPage`方法

原方法：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>public PageUtils queryPage(Map&lt;String, Object&gt; params) {<br>    IPage&lt;QuestionEntity&gt; page &#x3D; this.page(<br>        new Query&lt;QuestionEntity&gt;().getPage(params),<br>        new QueryWrapper&lt;QuestionEntity&gt;()<br>    );</p>
<p>    return new PageUtils(page);<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

修改后：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@Override<br>public PageUtils queryPage(Map&lt;String, Object&gt; params) {<br>    &#x2F;&#x2F;1.get key<br>    String key &#x3D; (String) params.get(“key”);<br>    QueryWrapper&lt;QuestionEntity&gt; queryWrapper &#x3D; new QueryWrapper&lt;&gt;();<br>    if (!StringUtils.isEmpty(key)) {<br>        queryWrapper.eq(“id”, key).or().like(“title”, key).or().like(“answer”, key);<br>    }<br>    IPage&lt;QuestionEntity&gt; page &#x3D; this.page(<br>        new Query&lt;QuestionEntity&gt;().getPage(params),<br>        queryWrapper<br>    );</p>
<p>    return new PageUtils(page);<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">6</span><span class="token punctuation">.</span>添加分页插件

添加分页插件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>package com.jackson0714.passjava.question.config;</p>
<p>import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;<br>import org.mybatis.spring.annotation.MapperScan;<br>import org.springframework.context.annotation.Bean;<br>import org.springframework.context.annotation.Configuration;<br>import org.springframework.transaction.annotation.EnableTransactionManagement;</p>
<p>@Configuration<br>@EnableTransactionManagement &#x2F;&#x2F;开启事务<br>@MapperScan(“com.jackson0714.passjava.question.dao”)<br>public class MyBatisConfig {</p>
<p>    &#x2F;&#x2F;引入分页插件<br>    @Bean<br>    public PaginationInterceptor paginationInterceptor() {<br>        PaginationInterceptor paginationInterceptor &#x3D; new PaginationInterceptor();<br>        &#x2F;&#x2F; 设置请求的页面大于最大页后操作， true调回到首页，false 继续请求  默认false<br>         paginationInterceptor.setOverflow(true);<br>        &#x2F;&#x2F; 设置最大单页限制数量，默认 500 条，-1 不受限制<br>        paginationInterceptor.setLimit(1000);<br>        return paginationInterceptor;<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

添加分页插件后的显示

# 六、PassJava 高级实践篇

## <span class="token number">6.1</span> Spring Cloud Alibaba 组件简介

### <span class="token number">1</span><span class="token punctuation">.</span>SpringCloud Alibaba概述

<span class="token operator">></span> 
  “
  Spring Cloud Alibaba 致力于提供微服务开发的一站式解决方案。此项目包含开发分布式应用微服务的必需组件，方便开发者通过 Spring Cloud 编程模型轻松使用这些组件来开发分布式应用服务。
  依托 Spring Cloud Alibaba，您只需要添加一些注解和少量配置，就可以将 Spring Cloud 应用接入阿里微服务解决方案，通过阿里中间件来迅速搭建分布式应用系统。
  ”
 

Github<span class="token operator">:</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>alibaba<span class="token operator">/</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>alibaba

Spring Cloud的几大痛点
<span class="token operator">-</span> 部分组件停止维护和更新，有问题也不易解决<span class="token operator">-</span> 部分环境搭建起来比较复杂，没有非常友好的可视化界面<span class="token operator">-</span> 配置相对来说复杂，需要较高的学习成本
Spring Cloud Alibaba的优势
<span class="token operator">-</span> 阿里经历过了时间的考验<span class="token operator">-</span> 设计合理<span class="token operator">-</span> 拥有不错的可视化界面，方便运维监控和排查问题<span class="token operator">-</span> 环境搭建和配置简单，学习成本低
PassJava项目搭配SpringCloud Alibaba技术的搭配方案



<span class="token operator">|</span>描述<span class="token operator">|</span>Spring Cloud<span class="token operator">|</span>Spring Cloud Alibaba<span class="token operator">|</span>组合选用
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span>服务发现组件<span class="token operator">|</span>Eureka（停止维护）服务发现组件<span class="token operator">|</span>Nacos 注册中心<span class="token operator">|</span>Spring Cloud Alibaba <span class="token operator">-</span> Nacos
<span class="token operator">|</span>配置中心组件<span class="token operator">|</span>Spring Cloud Config 配置中心<span class="token operator">|</span>Nacos 配置中心<span class="token operator">|</span>Spring Cloud Alibaba <span class="token operator">-</span> Nacos
<span class="token operator">|</span>断路保护组件<span class="token operator">|</span>Hystrix 断路保护<span class="token operator">|</span>Sentinel 服务容错<span class="token operator">|</span>Spring Cloud Alibaba <span class="token operator">-</span> Sentinel
<span class="token operator">|</span>链路追踪组件<span class="token operator">|</span>Sleuth 调用链监控<span class="token operator">|</span><span class="token operator">/</span><span class="token operator">|</span>Spring Cloud <span class="token operator">-</span> Sleuth
<span class="token operator">|</span>负载均衡组件<span class="token operator">|</span>Ribbon<span class="token operator">|</span><span class="token operator">/</span><span class="token operator">|</span>Spring Cloud <span class="token operator">-</span> Ribbon
<span class="token operator">|</span>远程调用组件<span class="token operator">|</span>OpenFeign （HTTP<span class="token operator">+</span>JSON）<span class="token operator">|</span>Dubbo（RPC框架）<span class="token operator">|</span>Spring Cloud <span class="token operator">-</span> OpenFeign
<span class="token operator">|</span>分布式事务<span class="token operator">|</span><span class="token operator">/</span><span class="token operator">|</span>Seata 分布式事务<span class="token operator">|</span>Spring Cloud Alibaba <span class="token operator">-</span> Seata
<span class="token operator">|</span>API 网关<span class="token operator">|</span>Gateway<span class="token operator">|</span><span class="token operator">/</span><span class="token operator">|</span>Spring Cloud <span class="token operator">-</span> Gateway



最后技术选型：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Spring Cloud Alibaba - Nacos 实现注册中心<br>Spring Cloud Alibaba - Nacos 实现配置中心<br>Spring Cloud Alibaba - Sentinel  实现服务容错<br>Spring Cloud Alibaba - Seata 实现分布式事务</p>
<p>Spring Cloud - Ribbon 实现负载均衡<br>Spring Cloud - Feign 实现远程调用<br>Spring Cloud - Gateway API网关<br>Spring Cloud - Sleuth 实现调用链监控</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>Spring Cloud Alibaba版本

项目的版本号格式为 x<span class="token punctuation">.</span>x<span class="token punctuation">.</span>x 的形式，其中 x 的数值类型为数字，从 <span class="token number">0</span> 开始取值，且不限于 <span class="token number">0</span><span class="token operator">~</span><span class="token number">9</span> 这个范围。项目处于孵化器阶段时，第一位版本号固定使用 <span class="token number">0</span>，即版本号为 <span class="token number">0</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>x 的格式。

由于 Spring Boot <span class="token number">1</span> 和 Spring Boot <span class="token number">2</span> 在 Actuator 模块的接口和注解有很大的变更，且 spring<span class="token operator">-</span>cloud<span class="token operator">-</span>commons 从 <span class="token number">1</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>x 版本升级到 <span class="token number">2.0</span><span class="token punctuation">.</span><span class="token number">0</span> 版本也有较大的变更，因此阿里采取跟 SpringBoot 版本号一致的版本<span class="token operator">:</span>
<span class="token operator">-</span> <span class="token number">1.5</span><span class="token punctuation">.</span>x 版本适用于 Spring Boot <span class="token number">1.5</span><span class="token punctuation">.</span>x<span class="token operator">-</span> <span class="token number">2.0</span><span class="token punctuation">.</span>x 版本适用于 Spring Boot <span class="token number">2.0</span><span class="token punctuation">.</span>x<span class="token operator">-</span> <span class="token number">2.1</span><span class="token punctuation">.</span>x 版本适用于 Spring Boot <span class="token number">2.1</span><span class="token punctuation">.</span>x<span class="token operator">-</span> <span class="token number">2.2</span><span class="token punctuation">.</span>x 版本适用于 Spring Boot <span class="token number">2.2</span><span class="token punctuation">.</span>x
Spring Cloud Alibaba 版本和Spring Cloud 和Spring Boot 版本兼容性列表



<span class="token operator">|</span>Spring Cloud 版本<span class="token operator">|</span>Spring Cloud Alibaba 版本<span class="token operator">|</span>Spring Boot 版本
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span>Spring Cloud Hoxton<span class="token punctuation">.</span>SR3<span class="token operator">|</span><span class="token number">2.2</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE<span class="token operator">|</span><span class="token number">2.2</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE
<span class="token operator">|</span>Spring Cloud Greenwich<span class="token operator">|</span><span class="token number">2.1</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE<span class="token operator">|</span><span class="token number">2.1</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE
<span class="token operator">|</span>Spring Cloud Finchley<span class="token operator">|</span><span class="token number">2.0</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE<span class="token operator">|</span><span class="token number">2.0</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE
<span class="token operator">|</span>Spring Cloud Edgware<span class="token operator">|</span><span class="token number">1.5</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE<span class="token operator">|</span><span class="token number">1.5</span><span class="token punctuation">.</span>x<span class="token punctuation">.</span>RELEASE



我们采用`Spring Cloud Hoxton<span class="token punctuation">.</span>SR3`<span class="token punctuation">,</span> `Spring Cloud Alibaba <span class="token number">2.2</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">.</span>RELEASE`<span class="token punctuation">,</span> `Spring Boot <span class="token number">2.2</span><span class="token punctuation">.</span><span class="token number">6</span> RELEASE`

PassJava<span class="token operator">-</span>Common的pom<span class="token punctuation">.</span>xml文件引入Spring Cloud Alibaba依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependencyManagement&gt;<br>    &lt;dependencies&gt;<br>        &lt;!–  Spring Cloud Alibaba 依赖  –&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;2.2.0.RELEASE&lt;&#x2F;version&gt;<br>            &lt;type&gt;pom&lt;&#x2F;type&gt;<br>            &lt;scope&gt;import&lt;&#x2F;scope&gt;<br>        &lt;&#x2F;dependency&gt;<br>    &lt;&#x2F;dependencies&gt;<br>&lt;&#x2F;dependencyManagement&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

## <span class="token number">6.2</span> SpringCloud整合Alibaba<span class="token operator">-</span>Nacos组件

<span class="token operator">></span> 
  “
  Nacos 是阿里巴巴开源的一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。
  ”
 

### <span class="token number">1</span><span class="token punctuation">.</span>引入Nacos 服务发现组件

passjava<span class="token operator">-</span>common模块的pom<span class="token punctuation">.</span>xml文件引入Nacos 服务发现组件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;!– nacos discovery 服务发现组件–&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;&#x2F;artifactId&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">2</span><span class="token punctuation">.</span>下载Nacos Server并启动
<span class="token operator">-</span> 下载Nacos Server 压缩包
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>alibaba<span class="token operator">/</span>nacos<span class="token operator">/</span>releases

启动 Server，进入解压后文件夹或编译打包好的文件夹，找到如下相对文件夹 nacos<span class="token operator">/</span>bin，并对照操作系统实际情况之下如下命令。
<span class="token number">1</span><span class="token punctuation">.</span> Linux<span class="token operator">/</span>Unix<span class="token operator">/</span>Mac 操作系统，执行命令 `sh startup<span class="token punctuation">.</span>sh <span class="token operator">-</span>m standalone`<span class="token number">1</span><span class="token punctuation">.</span> Windows 操作系统，执行命令 `cmd startup<span class="token punctuation">.</span>cmd`
windows执行startupm<span class="token punctuation">.</span>cmd遇到问题：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>λ startup.cmd                                                      <br> Please set the JAVA_HOME variable in your environment, We need java(x64)! jdk8 or later is better! </p>
<pre class="line-numbers language-java"><code class="language-java">

解决方案：

修改startup<span class="token punctuation">.</span>cmd文件中的<span class="token operator">%</span>JAVA_HOME<span class="token operator">%</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>%JAVA_HOME% 替换为 C:\Program Files\Java\jdk1.8.0_131</p>
<pre class="line-numbers language-java"><code class="language-java">

启动成功：

### <span class="token number">3</span><span class="token punctuation">.</span>每个微服务都配置Nacos Server 地址
<span class="token operator">-</span> 配置Nacos Server 地址
在passjava<span class="token operator">-</span>question、passjava<span class="token operator">-</span>channel、passjava<span class="token operator">-</span>content、passjava<span class="token operator">-</span>member、passjava<span class="token operator">-</span>study 应用的 <span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>application<span class="token punctuation">.</span>yml配置文件中配置 Nacos Server 地址
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>   cloud:<br>    nacos:<br>      discovery:<br>        server-addr: 127.0.0.1:8848</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>添加注解

为每个服务使用 <span class="token annotation punctuation">@EnableDiscoveryClient</span> 注解开启服务注册与发现功能
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>@EnableDiscoveryClient<br>@MapperScan(“com.jackson0714.passjava.question.dao”)<br>@SpringBootApplication<br>public class PassjavaQuestionApplication {</p>
<p>    public static void main(String[] args) {<br>        SpringApplication.run(PassjavaQuestionApplication.class, args);<br>    }</p>
<p>}</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>配置微服务的名称
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>  application:<br>    name: passjava-question</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">6</span><span class="token punctuation">.</span>访问nacos server后台
<span class="token operator">-</span> 登录后台
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8848</span><span class="token operator">/</span>nacos<span class="token operator">/</span>index<span class="token punctuation">.</span>html#<span class="token operator">/</span>login

用户名：nacos

密码：nacos
<span class="token operator">&lt;</span>li<span class="token operator">></span>查看已注册的服务<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>passjava<span class="token operator">-</span>channel 渠道微服务
passjava<span class="token operator">-</span>member 用户微服务
passjava<span class="token operator">-</span>study 学习微服务
passjava<span class="token operator">-</span>question 问题微服务
passjava<span class="token operator">-</span>content 内容微服务
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybXF4MW1HamtIUExKSk9QQ1lpY0NXSHhKSDVMcEZKT21RYTl3ZWVpY3dvS3A3RU8zRk50OGljWmVKUS82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
## <span class="token number">6.3</span> SpringCloud整合OpenFeign远程调用

### <span class="token number">1</span><span class="token punctuation">.</span>Feign 概述
<span class="token operator">-</span> Feign声明式客的HTTP客户端，让远程调用更简单。<span class="token operator">-</span> 提供了HTTP请求的模板，编写简单的接口和插入注解，就可以定义好HTTP请求的参数、格式、地址等信息<span class="token operator">-</span> 整合了Ribbon（负载均衡组件）和Hystix（服务熔断组件），不需要显示使用这两个组件<span class="token operator">-</span> Spring Cloud Feign 在Netflix Feign的基础上扩展了对SpringMVC注解的支持
### <span class="token number">2</span><span class="token punctuation">.</span> 远程调用示例

<span class="token operator">></span> 
  “
  示例：查询用户的学习时长
  ”
 

用户微服务passjava<span class="token operator">-</span>member调用学习微服务passjava<span class="token operator">-</span>study的方法

#### <span class="token number">2.1</span> 引入openfeign依赖

passjava<span class="token operator">-</span>member和passjava<span class="token operator">-</span>study项目的pom文件引入openfeign依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;&#x2F;artifactId&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">2.2</span> StudyTimeController定义远程调用测试方法

返回某个用户学习题目的总时长
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>@RequestMapping(“&#x2F;member&#x2F;list&#x2F;test”)<br>public R memberStudyTimeTest() {<br>    StudyTimeEntity studyTimeEntity &#x3D; new StudyTimeEntity();<br>    studyTimeEntity.setTotalTime(100); &#x2F;&#x2F; 学习时长：100分钟<br>    studyTimeEntity.setQuesTypeId(1L); &#x2F;&#x2F; 题目类型：1 （javaBasic）</p>
<p>    return R.ok().put(“studyTime”, Arrays.asList(studyTimeEntity));<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">2.3</span> member目录下创建feign service
<span class="token operator">-</span> 创建<span class="token keyword">package</span><span class="token operator">:</span> com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>passjava<span class="token punctuation">.</span>member<span class="token punctuation">.</span>feign<span class="token operator">-</span> 创建StudyTimeFeignService接口<span class="token operator">&lt;</span>li<span class="token operator">></span>添加注解`<span class="token annotation punctuation">@FeignClient</span>`。显示声明这个接口用来远程调用`study`服务。<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">"passjava-study"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudyTimeFeignService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>添加远程调用方法<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token keyword">public</span> R <span class="token function">memberStudyTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>给方法添加要远程调用的方法的路径`study<span class="token operator">/</span>studytime<span class="token operator">/</span>member<span class="token operator">/</span>list<span class="token operator">/</span>test`<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"study/studytime/member/list/test"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> R <span class="token function">getMemberStudyTimeListTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>添加注解`<span class="token annotation punctuation">@EnableFeignClients</span>`开启远程调用服务。给类PassjavaStudyApplication<span class="token punctuation">.</span>java添加注解`<span class="token annotation punctuation">@EnableFeignClients</span>`。basePackages代表自动扫码指定路径下所有带有<span class="token annotation punctuation">@FeignClient</span>注解的接口。<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token annotation punctuation">@EnableFeignClients</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">"com.jackson0714.passjava.member.feign"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"com.jackson0714.passjava.member.dao"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PassjavaMemberApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>PassjavaMemberApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>测试接口studytime和member都有数据，学习时长：<span class="token number">100</span>分钟，昵称：悟空聊架构<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybUl1YXFJV2lja1huVTBYaWFpYzJyYndWa2JDTWVycnpnYlVhTGVpYXEzdmdKdXZkQmliOWc5emM0bW5BLzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    接口测试结果
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">-</span> <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>启动passjava<span class="token operator">-</span>member和passjava<span class="token operator">-</span>study服务<span class="token operator">-</span> 用postman工具或浏览器输入请求地址http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">10000</span><span class="token operator">/</span>member<span class="token operator">/</span>member<span class="token operator">/</span>studytime<span class="token operator">/</span>list<span class="token operator">/</span>test<span class="token operator">-</span> 返回结果如下图
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>public R memberStudyTime();</p>
<pre class="line-numbers language-java"><code class="language-java">

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>@EnableFeignClients(basePackages &#x3D; “com.jackson0714.passjava.member.feign”)<br>@EnableDiscoveryClient<br>@MapperScan(“com.jackson0714.passjava.member.dao”)<br>@SpringBootApplication<br>public class PassjavaMemberApplication {</p>
<p>    public static void main(String[] args) {<br>        SpringApplication.run(PassjavaMemberApplication.class, args);<br>    }</p>
<p>}</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">2.4</span> 测试OpenFeign传参

示例：用户id作为参数在服务间传递

MemberController
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>@RequestMapping(“&#x2F;studytime&#x2F;list&#x2F;test&#x2F;{id}”)<br>public R getMemberStudyTimeListTest(@PathVariable(“id”) Long id) {<br>    &#x2F;&#x2F;mock数据库查到的会员信息<br>    MemberEntity memberEntity &#x3D; new MemberEntity();<br>    memberEntity.setId(id); &#x2F;&#x2F; 学习时长：100分钟<br>    memberEntity.setNickname(“悟空聊架构”);</p>
<p>    &#x2F;&#x2F;远程调用拿到该用户的学习时长（学习时长是mock数据）<br>    R memberStudyTimeList &#x3D; studyTimeFeignService.getMemberStudyTimeListTest(id);<br>    return R.ok().put(“member”, memberEntity).put(“studytime”, memberStudyTimeList.get(“studytime”));<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

StudyTimeFeignService
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@FeignClient(“passjava-study”)<br>public interface StudyTimeFeignService {<br>    @RequestMapping(“study&#x2F;studytime&#x2F;member&#x2F;list&#x2F;test&#x2F;{id}”)<br>    public R getMemberStudyTimeListTest(@PathVariable(“id”) Long id);<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

StudyTimeController
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@RequestMapping(“&#x2F;member&#x2F;list&#x2F;test&#x2F;{id}”)<br>public R memberStudyTimeTest(@PathVariable(“id”) Long id) {<br>    StudyTimeEntity studyTimeEntity &#x3D; new StudyTimeEntity();<br>    studyTimeEntity.setTotalTime(100); &#x2F;&#x2F; 学习时长：100分钟<br>    studyTimeEntity.setQuesTypeId(1L); &#x2F;&#x2F; 题目类型：1 （javaBasic）</p>
<p>    return R.ok().put(“studytime”, Arrays.asList(studyTimeEntity));<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

请求地址和参数：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">10000</span><span class="token operator">/</span>member<span class="token operator">/</span>member<span class="token operator">/</span>studytime<span class="token operator">/</span>list<span class="token operator">/</span>test<span class="token operator">/</span><span class="token number">1</span>

执行结果：

#### <span class="token number">2.5</span> 总结FeignClient使用方法
<span class="token operator">-</span> 引入OpenFeign依赖<span class="token operator">-</span> 定义FeignClient接口类（注解`<span class="token annotation punctuation">@FeignClient</span>`），声明这个接口类是用来远程调用其他服务的<span class="token operator">-</span> 接口类中定义要远程调用的接口方法，指定远程服务方法的路径<span class="token operator">-</span> Controller类中调用接口方法<span class="token operator">-</span> 开启远程调用（注解`<span class="token annotation punctuation">@EnableFeignClients</span>`）<span class="token operator">-</span> 远程调用的流程：<span class="token operator">-</span> <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token annotation punctuation">@RequestBody</span>将这个对象转为json<span class="token operator">-</span> 找到passjava<span class="token operator">-</span>study服务，给study<span class="token operator">/</span>studytime<span class="token operator">/</span>member<span class="token operator">/</span>list<span class="token operator">/</span>test服务发送请求<span class="token operator">-</span> 将json放到请求体里面，发送请求<span class="token operator">-</span> 对方服务收到请求，请求体里有json数据<span class="token operator">-</span> 将请求体中的json数据转换成对方服务的参数类型。只需要两边的字段名称和类型是一致的。
## <span class="token number">6.4</span> Spring Cloud 整合 Nacos配置中心

### <span class="token number">1</span><span class="token punctuation">.</span>传统配置方式
<span class="token operator">-</span> application<span class="token punctuation">.</span>properties文件中定义两个配置：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>member.nickname &#x3D; “悟空聊架构”<br>member.age &#x3D; “18”</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 示例控制器中定义私有变量nickname和age，<span class="token annotation punctuation">@value</span>代表从配置中取值
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>@Value(“${member.nickname}”)<br>private  String nickname;</p>
<p>@Value(“$member.age”)<br>private  Integer age;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 示例控制器中定义方法：获取nick和age的值
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>@RequestMapping(“&#x2F;test-local-config”)<br>public R testLocalConfig() {<br>    return R.ok().put(“nickname”, nickname).put(“age”, age);<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 测试结果
总结：从配置文件中获取配置。

这种方式的缺点是什么呢？如果要修改配置参数，则需要重新启动服务。如果服务很多，则需要重启所有服务，非常不方便。

有没有什么办法不停服务修改配置而且使其生效呢？

答案：有的，用Spring Cloud Alibaba的Nacos 组件就可以完成。

### <span class="token number">2</span><span class="token punctuation">.</span>引入Nacos依赖

PassJava<span class="token operator">-</span>Common项目的pom<span class="token punctuation">.</span>xml文件引入Spring Cloud Alibaba Nacos Config依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;&#x2F;artifactId&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>配置Nacos元数据
<span class="token operator">-</span> passjava<span class="token operator">-</span>member 添加 <span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">/</span>bootstrap<span class="token punctuation">.</span>properties 配置文件（注意：bootstrap<span class="token punctuation">.</span>properties 优先级高于其他配置文件）<span class="token operator">-</span> 配置 Nacos Config 元数据
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring.application.name&#x3D;passjava-member<br>spring.cloud.nacos.config.server-addr&#x3D;127.0.0.1:8848</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>Nacos后台新增配置

Data ID<span class="token operator">:</span> passjava<span class="token operator">-</span>member<span class="token punctuation">.</span>properties

Group<span class="token operator">:</span> DEFAULT_GROUP

配置格式<span class="token operator">:</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>member.nick&#x3D;”悟空”<br>member.age&#x3D;10</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>开启动态刷新配置功能

添加注解<span class="token annotation punctuation">@RefreshScope</span>开启动态刷新配置功能
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>@RefreshScope<br>@RestController<br>@RequestMapping(“member&#x2F;sample”)<br>public class SampleController {}</p>
<pre class="line-numbers language-java"><code class="language-java">

可以从控制台看到日志信息：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Refresh keys changed: [member.age]<br>2020-04-19 23:34:07.154  INFO 8796 — [-127.0.0.1_8848] c.a.nacos.client.config.impl.CacheData   : [fixed-127.0.0.1_8848] [notify-ok] dataId&#x3D;passjava-member.properties, group&#x3D;DEFAULT_GROUP, md5&#x3D;df136e146c83cbf857567e75acb11e2b, listener&#x3D;com.alibaba.cloud.nacos.refresh.NacosContextRefresher$1@4f49b78b<br>2020-04-19 23:34:07.154  INFO 8796 — [-127.0.0.1_8848] c.a.nacos.client.config.impl.CacheData   : [fixed-127.0.0.1_8848] [notify-listener] time cost&#x3D;529ms in ClientWorker, dataId&#x3D;passjava-member.properties, group&#x3D;DEFAULT_GROUP, md5&#x3D;df136e146c83cbf857567e75acb11e2b, listener&#x3D;com.alibaba.cloud.nacos.refresh.NacosContextRefresher$1@4f49b78b</p>
<pre class="line-numbers language-java"><code class="language-java">

`member<span class="token punctuation">.</span>age` 更新了，通知了member服务，刷新了配置。对应的配置id为`passjava<span class="token operator">-</span>member<span class="token punctuation">.</span>properties`，分组为`DEFAULT_GROUP`。监听器为`com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>refresh<span class="token punctuation">.</span>NacosContextRefresher`

### <span class="token number">6</span><span class="token punctuation">.</span>测试结果

访问：http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">10000</span><span class="token operator">/</span>member<span class="token operator">/</span>sample<span class="token operator">/</span>test<span class="token operator">-</span>local<span class="token operator">-</span>config

结果：nickname和age和Nacos后台配置一致

结论：只用在Nacos后台改配置即可实时修改配置。

注意：Nacos的配置项优先级高于application<span class="token punctuation">.</span>propertite里面的配置。

### <span class="token number">7</span><span class="token punctuation">.</span>命名空间

我们现在有<span class="token number">5</span>个微服务，每个微服务用到的配置可能都不一样，那不同微服务怎么样获取自己微服务的配置呢？

这里可以用到命名空间，我们针对每个微服务，都创建一个命名空间。
<span class="token operator">&lt;</span>li<span class="token operator">></span>创建命名空间<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWMzYXFtanI1M2NMMk50bTlZZE9mN2liTUkwR2ljMmI4NldsREdXemlicWtqVEx6ZmRndExsamljNmcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    创建命名空间
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="创建5个命名空间"><a href="#创建5个命名空间" class="headerlink" title="创建5个命名空间"></a>创建5个命名空间</h1><p>passjava-channel<br>passjava-content<br>passjava-member<br>passjava-question<br>passjava-study</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">&lt;</span>li<span class="token operator">></span>命名空间下创建配置我们打开配置列表菜单，可以看到有五个命名空间。<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybXo4QVBoZDhNSFZNSmtSeGljcExzeXVZcG8wT29MU2FmVFlkeG1DRWlicFRQaWM2amxsQ3Z1SXF3Zy82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    命名空间下创建配置
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
选中passjava<span class="token operator">-</span>channel命名空间，然后新增配置项，与之前新增配置的步骤一致，也可以通过克隆命名空间来克隆配置。
<span class="token operator">&lt;</span>li<span class="token operator">></span>修改指定的命名空间bootstrap<span class="token punctuation">.</span>properties配置命名空间<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>namespace<span class="token operator">=</span>passjava<span class="token operator">-</span>member
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span>li<span class="token operator">></span>测试配置是否生效修改passjava<span class="token operator">-</span>member<span class="token punctuation">.</span>properties的配置内容<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWljaFZjRWE5Vk81SDhzNU94bmM4NlBXdE5WWU9YZkoxTmRUWHg5RjZWUDdaRmVoNU1BUXU1ZXcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    passjava<span class="token operator">-</span>member<span class="token punctuation">.</span>properties
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span>重启member服务访问方法：<span class="token operator">/</span>member<span class="token operator">/</span>sample<span class="token operator">/</span>test<span class="token operator">-</span>local<span class="token operator">-</span>config执行结果：<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token punctuation">{</span>
    <span class="token string">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
    <span class="token string">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">"nickname"</span><span class="token operator">:</span> <span class="token string">"\"悟空member\""</span><span class="token punctuation">,</span>
    <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>说明获取的是passjava<span class="token operator">-</span>member命名空间的配置<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>{<br>    “msg”: “success”,<br>    “code”: 0,<br>    “nickname”: “&quot;悟空member&quot;“,<br>    “age”: 30<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">8</span><span class="token punctuation">.</span>分组

如果我们有多套环境，比如开发环境，测试环境，生产环境，每一套环境的配置参数不一样，那配置中心该如何配置呢？

我们可以使用配置中心的`分组`功能。每一套环境都是一套分组。
<span class="token operator">-</span> 首先创建一套dev环境配置项，然后克隆配置到test和prod环境<span class="token operator">-</span> bootstrap<span class="token punctuation">.</span>properties配置当前使用的分组：prod
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring.cloud.nacos.config.group&#x3D;prod</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">&lt;</span>li<span class="token operator">></span>测试获取生产环境配置<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span><span class="token punctuation">{</span>
    <span class="token string">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
    <span class="token string">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">"nickname"</span><span class="token operator">:</span> <span class="token string">"\"悟空-prod\""</span><span class="token punctuation">,</span>
    <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>可以看到获取到的是prod分组的配置<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
### <span class="token number">9</span><span class="token punctuation">.</span>多配置集

我们可以将application<span class="token punctuation">.</span>yml文件中的datasource、mybatis<span class="token operator">-</span>plus等配置进行拆解，放到配置中心。group可以创建<span class="token number">3</span>套，dev<span class="token operator">/</span>test<span class="token operator">/</span>prod。

<span class="token number">1</span><span class="token punctuation">.</span>配置中心新建`datasource<span class="token punctuation">.</span>yml` 配置

<span class="token number">2</span><span class="token punctuation">.</span>配置中心新建`mybatis<span class="token punctuation">.</span>yml` 配置

<span class="token number">3</span><span class="token punctuation">.</span>配置中心新建`more<span class="token punctuation">.</span>yml` 配置

<span class="token number">4</span><span class="token punctuation">.</span>克隆dev环境配置到test和prod环境

<span class="token number">5</span><span class="token punctuation">.</span>bootstrap<span class="token punctuation">.</span>properties增加nacos配置，application<span class="token punctuation">.</span>yml注释配置
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>spring.application.name&#x3D;passjava-member<br>spring.cloud.nacos.config.server-addr&#x3D;127.0.0.1:8848</p>
<p>spring.cloud.nacos.config.namespace&#x3D;passjava-member<br>spring.cloud.nacos.config.group&#x3D;prod</p>
<p>spring.cloud.nacos.config.extension-configs[0].data-id&#x3D;datasource.yml<br>spring.cloud.nacos.config.extension-configs[0].group&#x3D;dev<br>spring.cloud.nacos.config.extension-configs[0].refresh&#x3D;true</p>
<p>spring.cloud.nacos.config.extension-configs[1].data-id&#x3D;mybatis.yml<br>spring.cloud.nacos.config.extension-configs[1].group&#x3D;dev<br>spring.cloud.nacos.config.extension-configs[1].refresh&#x3D;true</p>
<p>spring.cloud.nacos.config.extension-configs[2].data-id&#x3D;more.yml<br>spring.cloud.nacos.config.extension-configs[2].group&#x3D;dev<br>spring.cloud.nacos.config.extension-configs[2].refresh&#x3D;true</p>
<pre class="line-numbers language-java"><code class="language-java">

<span class="token number">6</span><span class="token punctuation">.</span>测试配置是否生效
<span class="token operator">-</span> 测试passjava<span class="token operator">-</span>member<span class="token punctuation">.</span>properties和more<span class="token punctuation">.</span>yml配置是否生效
请求url<span class="token operator">:</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">10000</span><span class="token operator">/</span>member<span class="token operator">/</span>sample<span class="token operator">/</span>test<span class="token operator">-</span>local<span class="token operator">-</span>config

返回配置的nick和age，且端口是<span class="token number">10000</span>，且member服务注册到注册中心
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>{<br>    “msg”: “success”,<br>    “code”: 0,<br>    “nickname”: “&quot;悟空-prod1&quot;“,<br>    “age”: 22<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 测试datasource<span class="token punctuation">.</span>yml和mybatis<span class="token punctuation">.</span>yml配置是否生效
请求url<span class="token operator">:</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">10000</span><span class="token operator">/</span>member<span class="token operator">/</span>member<span class="token operator">/</span>list

返回数据库查询结果
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>{<br>    “msg”: “success”,<br>    “code”: 0,<br>    “page”: {<br>        “totalCount”: 0,<br>        “pageSize”: 10,<br>        “totalPage”: 0,<br>        “currPage”: 1,<br>        “list”: []j<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

说明以上配置都生效了。

#### 更多配置项



<span class="token operator">|</span>配置项<span class="token operator">|</span>key<span class="token operator">|</span>默认值<span class="token operator">|</span>说明
<span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span>服务端地址<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>server<span class="token operator">-</span>addr<span class="token operator">||</span>
<span class="token operator">|</span>DataId前缀<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>prefix<span class="token operator">||</span>spring<span class="token punctuation">.</span>application<span class="token punctuation">.</span>name
<span class="token operator">|</span>Group<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>group<span class="token operator">|</span>DEFAULT_GROUP<span class="token operator">|</span>
<span class="token operator">|</span>dataID后缀及内容文件格式<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>file<span class="token operator">-</span>extension<span class="token operator">|</span>properties<span class="token operator">|</span>dataId的后缀，同时也是配置内容的文件格式，目前只支持 properties
<span class="token operator">|</span>配置内容的编码方式<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>encode<span class="token operator">|</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">|</span>配置的编码
<span class="token operator">|</span>获取配置的超时时间<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>timeout<span class="token operator">|</span><span class="token number">3000</span><span class="token operator">|</span>单位为 ms
<span class="token operator">|</span>配置的命名空间<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>namespace<span class="token operator">||</span>常用场景之一是不同环境的配置的区分隔离，例如开发测试环境和生产环境的资源隔离等。
<span class="token operator">|</span>AccessKey<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>access<span class="token operator">-</span>key<span class="token operator">||</span>
<span class="token operator">|</span>SecretKey<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>secret<span class="token operator">-</span>key<span class="token operator">||</span>
<span class="token operator">|</span>相对路径<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>context<span class="token operator">-</span>path<span class="token operator">||</span>服务端 API 的相对路径
<span class="token operator">|</span>接入点<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>endpoint<span class="token operator">|</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">|</span>地域的某个服务的入口域名，通过此域名可以动态地拿到服务端地址
<span class="token operator">|</span>是否开启监听和自动刷新<span class="token operator">|</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>refresh<span class="token operator">-</span>enabled<span class="token operator">|</span><span class="token boolean">true</span><span class="token operator">|</span>



### <span class="token number">10</span><span class="token punctuation">.</span>使用Nacos总结
<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span>引入Nacos依赖<span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">.</span>配置Nacos数据源<span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">.</span>配置中心配置数据集`DataId`和配置内容<span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">.</span>开启动态刷新配置`<span class="token annotation punctuation">@RefreshScope</span>`<span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">.</span>获取配置项的值`<span class="token annotation punctuation">@value</span>`<span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">.</span>优先使用配置中心的配置<span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">.</span>使用命名空间`namespace`来创建各服务的配置<span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">.</span>使用分组`group`来区分不同环境<span class="token operator">-</span> <span class="token number">9</span><span class="token punctuation">.</span>使用多配置集`extension<span class="token operator">-</span>configs`区分不同类型的配置
## <span class="token number">6.5</span> SpringCloud整合Gateway网关

### <span class="token number">1</span><span class="token punctuation">.</span>Gateway网关介绍
<span class="token operator">-</span> 网关<span class="token operator">:</span>流量的入口<span class="token operator">-</span> 网关常用功能<span class="token operator">:</span>路由转发<span class="token punctuation">,</span>权限校验<span class="token punctuation">,</span>限流控制<span class="token operator">-</span> Spring Cloud Gateway是Spring Cloud官方推出的第二代网关框架<span class="token operator">-</span> Spring Cloud Gateway取代了netflix的Zuul网关
### <span class="token number">2</span><span class="token punctuation">.</span>Gateway原理

PassJava项目中<span class="token punctuation">,</span>小程序和管理后台请求先访问到API网关<span class="token punctuation">.</span>

API网关通过注册中心实时感知微服务的状态的路由地址<span class="token punctuation">,</span>准确地将请求路由到各个服务<span class="token punctuation">.</span>

官方文档<span class="token operator">:</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>cloud<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>io<span class="token operator">/</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span><span class="token keyword">static</span><span class="token operator">/</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>gateway<span class="token operator">/</span><span class="token number">2.2</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">.</span>RELEASE<span class="token operator">/</span>reference<span class="token operator">/</span>html<span class="token operator">/</span>
<span class="token operator">-</span> 请求到达网关后<span class="token punctuation">,</span>先经过断言Predicate<span class="token punctuation">,</span>是否符合某个路由规则<span class="token operator">-</span> 如果符合<span class="token punctuation">,</span>则按路由规则路由到指定地址<span class="token operator">-</span> 请求和响应都可以通过过滤器Filter进行过滤
### <span class="token number">3</span><span class="token punctuation">.</span>创建Gateway 模块
<span class="token operator">-</span> 适用Spring 初始化器创建Gateway module<span class="token operator">-</span> 创建module<span class="token operator">-</span> 选择Gateway依赖<span class="token operator">-</span> 引入Gateway模块
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;module&gt;passjava-gateway&lt;&#x2F;module&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>配置Gateway
<span class="token operator">-</span> 引入Nacos组件
因common模块引入了nacos注册中心组件<span class="token punctuation">,</span>所以我们可以直接引用common模块
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br> &lt;groupId&gt;com.jackson0714.passjava&lt;&#x2F;groupId&gt;<br> &lt;artifactId&gt;passjava-common&lt;&#x2F;artifactId&gt;<br> &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 应用类上添加注解`<span class="token annotation punctuation">@EnableDiscoveryClient</span>`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>@RefreshScope<br>@EnableDiscoveryClient<br>@SpringBootApplication(exclude &#x3D; {DataSourceAutoConfiguration.class})<br>public class PassjavaGatewayApplication {<br> public static void main(String[] args) {<br>  SpringApplication.run(PassjavaGatewayApplication.class, args);<br> }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">5</span><span class="token punctuation">.</span>使用Gateway demo
<span class="token operator">&lt;</span>li<span class="token operator">></span>新建application<span class="token punctuation">.</span>yml文件<span class="token operator">&lt;</span>pre <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"has"</span><span class="token operator">></span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"language-go"</span><span class="token operator">></span>spring<span class="token operator">:</span>
  cloud<span class="token operator">:</span>
    gateway<span class="token operator">:</span>
      routes<span class="token operator">:</span>
        <span class="token operator">-</span> id<span class="token operator">:</span> route_qq
          uri<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com
          predicates<span class="token operator">:</span>
            <span class="token operator">-</span> Query<span class="token operator">=</span>url<span class="token punctuation">,</span>qq
        <span class="token operator">-</span> id<span class="token operator">:</span> route_baidu
          uri<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
          predicates<span class="token operator">:</span>
            <span class="token operator">-</span> Query<span class="token operator">=</span>url<span class="token punctuation">,</span>baidu
<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>第一条路由规则<span class="token operator">:</span>当请求路径中包含url<span class="token operator">=</span>qq<span class="token punctuation">,</span>则跳转到http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>qq<span class="token punctuation">.</span>com第二条路由规则<span class="token operator">:</span>当请求路径中包含url<span class="token operator">=</span>baidu<span class="token punctuation">,</span>则跳转到http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
后续在PassJava项目中使用Gateway的强大功能<span class="token punctuation">.</span>

## <span class="token number">6.6</span> 整合OSS对象存储

### <span class="token number">1</span><span class="token punctuation">.</span>缘起

<span class="token operator">></span> 
  “
  文件上传在系统中用的很频繁，所以我们需要将上传的文件进行存储，传统的将文件上传到本机已不适用分布式系统。自己搭建文件服务器有复杂性和维护成本。所以我们可以采用市面上成熟的文件存储服务，如阿里云的OSS对象存储服务。
  ”
 

每个 OSS 的用户都会用到上传服务。Web 端常见的上传方法是用户在浏览器或 APP 端上传文件到应用服务器，应用服务器再把文件上传到 OSS。具体流程如下图所示。<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWlhaWNsY2pjeVVZRmFHcm53NXB2UUY1Ym9GTmNxNzQ5cHQwTWZoNmRKVXlrSng2alBhTzkyeXZBLzY0MA?x-oss-process=image/format,png"</span><span class="token operator">></span>

和数据直传到 OSS 相比，以上方法有三个缺点：
<span class="token operator">-</span> 上传慢：用户数据需先上传到应用服务器，之后再上传到OSS。网络传输时间比直传到OSS多一倍。如果用户数据不通过应用服务器中转，而是直传到OSS，速度将大大提升。而且OSS采用BGP带宽，能保证各地各运营商之间的传输速度。<span class="token operator">-</span> 扩展性差：如果后续用户多了，应用服务器会成为瓶颈。<span class="token operator">-</span> 费用高：需要准备多台应用服务器。由于OSS上传流量是免费的，如果数据直传到OSS，不通过应用服务器，那么将能省下几台应用服务器。
### <span class="token number">2</span><span class="token punctuation">.</span>技术方案

#### <span class="token number">2.1</span> 服务端签名后直传

##### <span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">1</span> 背景

采用JavaScript客户端直接签名（参见JavaScript客户端签名直传）时，AccessKeyID和AcessKeySecret会暴露在前端页面，因此存在严重的安全隐患。因此，OSS提供了服务端签名后直传的方案。

##### <span class="token number">2.1</span><span class="token punctuation">.</span><span class="token number">2</span> 原理介绍

服务端签名后直传的原理如下：
<span class="token number">1</span><span class="token punctuation">.</span> 用户发送上传Policy请求到应用服务器。<span class="token number">1</span><span class="token punctuation">.</span> 应用服务器返回上传Policy和签名给用户。<span class="token number">1</span><span class="token punctuation">.</span> 用户直接上传数据到OSS。
### <span class="token number">3</span><span class="token punctuation">.</span>实现案例

#### <span class="token number">3.1</span> 开通阿里云OSS
<span class="token operator">-</span> 登录阿里云官网https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>sale<span class="token operator">-</span>season<span class="token operator">/</span><span class="token number">2020</span><span class="token operator">/</span>procurement<span class="token operator">-</span><span class="token keyword">new</span><span class="token operator">-</span>members<span class="token operator">?</span>userCode<span class="token operator">=</span>thp9caen<span class="token operator">&lt;</span>li<span class="token operator">></span>创建Bucket 存储桶<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybTJ5WW9rYTZEU2oyeDVOQnlTVWg3aWJyZWpidlJVRUVDUHk0YmV0dWN0dW9lZjJ5RDN0RU1DWmcvNjQw?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    创建Bucket 存储桶
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">-</span> 获取accesskey id和secret<span class="token operator">&lt;</span>li<span class="token operator">></span>分配权限分配 管理对象存储服务（OSS）权限<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TZkFITXVVeHFKM3dYYlNJaklBeHZDZWVmcGJvbVkybWljZTBvQWRRaWI2RDJvNmljNERHNmlhelIwQU1IUWNvaHNWeGd1RVJnUTVpYzV4d0V0WnphaWMyZGd3Zy82NDA?x-oss-process=image/format,png"</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>figcaption<span class="token operator">></span>
    分配权限
   <span class="token operator">&lt;</span><span class="token operator">/</span>figcaption<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
#### <span class="token number">3.2</span> 使用OSS SDK

##### <span class="token number">3.2</span><span class="token punctuation">.</span><span class="token number">1</span> 安装SDK

在Maven项目中加入依赖项
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/32009.html?spm=a2c4g.11186623.6.769.2c5145dc4TUgTa">https://help.aliyun.com/document_detail/32009.html?spm=a2c4g.11186623.6.769.2c5145dc4TUgTa</a><br>&lt;dependency&gt;<br>    &lt;groupId&gt;com.aliyun.oss&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;aliyun-sdk-oss&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;3.8.0&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

##### <span class="token number">3.2</span><span class="token punctuation">.</span><span class="token number">2</span>  上传文件到OSS
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@Test<br>void testUploadByOss() throws FileNotFoundException {<br>    &#x2F;&#x2F; Endpoint以杭州为例，其它Region请按实际情况填写。<br>    String endpoint &#x3D; “<a target="_blank" rel="noopener" href="http://oss-cn-beijing.aliyuncs.com&quot;/">http://oss-cn-beijing.aliyuncs.com&quot;</a>;<br>    &#x2F;&#x2F; 阿里云主账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM账号进行API访问或日常运维，请登录 <a target="_blank" rel="noopener" href="https://ram.console.aliyun.com/">https://ram.console.aliyun.com</a> 创建RAM账号。<br>    String accessKeyId &#x3D; “xxxx”;<br>    String accessKeySecret &#x3D; “xxxx”;<br>    String bucketName &#x3D; “passjava”;</p>
<p>    &#x2F;&#x2F; &lt;yourObjectName&gt;上传文件到OSS时需要指定包含文件后缀在内的完整路径，例如abc&#x2F;efg&#x2F;123.jpg。<br>    String localFile &#x3D; “C:\Users\Administrator\Pictures\coding_java.png”;<br>    String fileKeyName &#x3D; “coding_java.png”;<br>    &#x2F;&#x2F; 创建OSSClient实例。<br>    OSS ossClient &#x3D; new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);</p>
<p>    InputStream inputStream &#x3D; new FileInputStream(localFile);<br>    ossClient.putObject(bucketName, fileKeyName, inputStream);</p>
<p>    &#x2F;&#x2F; 关闭OSSClient。<br>    ossClient.shutdown();<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">3.3</span> 整合Spring Cloud Alicloud OSS

##### <span class="token number">3.3</span><span class="token punctuation">.</span><span class="token number">1</span>  passjava<span class="token operator">-</span>common项目引入spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>alicloud<span class="token operator">-</span>oss依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;com.alibaba.cloud&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;spring-cloud-starter-alicloud-oss&lt;&#x2F;artifactId&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

##### <span class="token number">3.3</span><span class="token punctuation">.</span><span class="token number">2</span>  配置alicloud oss
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>  cloud:<br>    alicloud:<br>      access-key: xxxx<br>      secret-key: xxxx<br>      oss:<br>        endpoint: oss-cn-beijing.aliyuncs.com</p>
<pre class="line-numbers language-java"><code class="language-java">

##### <span class="token number">3.3</span><span class="token punctuation">.</span><span class="token number">3</span>  测试上传
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@Autowired<br>OSSClient ossClient;</p>
<p>@Test<br>void testUploadByAlicloudOss() throws FileNotFoundException {<br>    String bucketName &#x3D; “passjava”;<br>    String localFile &#x3D; “C:\Users\Administrator\Pictures\coding_java.png”;<br>    String fileKeyName &#x3D; “coding_java.png”;<br>    InputStream inputStream &#x3D; new FileInputStream(localFile);<br>    ossClient.putObject(bucketName, fileKeyName, inputStream);<br>    ossClient.shutdown();<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">3.4</span> 获取服务端签名

##### <span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">1</span> 准备工作：
<span class="token operator">-</span> 创建一个第三方服务passjava<span class="token operator">-</span>thirdparty<span class="token operator">-</span> 引入passjava<span class="token operator">-</span>common模块，并且排除mybatis<span class="token operator">-</span>plus依赖
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&lt;dependency&gt;<br>    &lt;groupId&gt;com.jackson0714.passjava&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;passjava-common&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;<br>    &lt;exclusions&gt;<br>        &lt;exclusion&gt;<br>            &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;<br>        &lt;&#x2F;exclusion&gt;<br>    &lt;&#x2F;exclusions&gt;<br>&lt;&#x2F;dependency&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 配置服务发现和端口
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>spring:<br>  cloud:<br>    nacos:<br>      discovery:<br>        server-addr: 127.0.0.1:8848<br>  application:<br>        name: passjava-thirdparty<br>server:<br>  port: 14000</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 配置配置中心
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>spring.application.name&#x3D;passjava-thirdparty<br>spring.cloud.nacos.config.server-addr&#x3D;127.0.0.1:8848<br>spring.cloud.nacos.config.namespace&#x3D;passjava-thirdparty</p>
<p>spring.cloud.nacos.config.extension-configs[0].data-id&#x3D;oss.yml<br>spring.cloud.nacos.config.extension-configs[0].group&#x3D;DEFAULT_GROUP<br>spring.cloud.nacos.config.extension-configs[0].refresh&#x3D;true</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 配置Nacos命名空间和oss<span class="token punctuation">.</span>yml
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>spring:<br>  cloud:<br>    alicloud:<br>      access-key: LTAI4G3KxBJ26EUbWsenmqhP<br>      secret-key: RHtADVlvlKJvVBQnFNNvnne9p4NwnA<br>      oss:<br>        endpoint: oss-cn-beijing.aliyuncs.com</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 开启服务发现`<span class="token annotation punctuation">@EnableDiscoveryClient</span>`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>@EnableDiscoveryClient<br>@SpringBootApplication<br>public class PassjavaThirdpartyApplication {<br>    public static void main(String[] args) {<br>        SpringApplication.run(PassjavaThirdpartyApplication.class, args);<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

##### <span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">2</span> 获取签名类
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@RestController<br>@RequestMapping(“&#x2F;thirdparty&#x2F;v1&#x2F;admin&#x2F;oss”)<br>public class OssController {</p>
<p>    @Autowired<br>    OSS ossClient;</p>
<p>    @Value(“${spring.cloud.alicloud.access-key}”)<br>    private String accessId;</p>
<p>    @Value(“${spring.cloud.alicloud.secret-key}”)<br>    private String accessKey;</p>
<p>    @Value(“${spring.cloud.alicloud.oss.endpoint}”)<br>    private String endpoint;</p>
<p>    @Value(“${spring.cloud.alicloud.oss.bucket}”)<br>    private String bucket;</p>
<p>    @RequestMapping(“&#x2F;getPolicy”)<br>    public Map&lt;String, String&gt; getPolicy() {<br>        String host &#x3D; “https:&#x2F;&#x2F;“ + bucket + “.” + endpoint; &#x2F;&#x2F; host的格式为 bucketname.endpoint<br>        &#x2F;&#x2F; callbackUrl为 上传回调服务器的URL，请将下面的IP和Port配置为您自己的真实信息。<br>        &#x2F;&#x2F; String callbackUrl &#x3D; “<a href="http://88.88.88.88:8888&quot;">http://88.88.88.88:8888&quot;</a>;<br>        String formatDate &#x3D; new SimpleDateFormat(“yyyy-MM-dd”).format(new Date());<br>        String dir &#x3D; formatDate + “&#x2F;“; &#x2F;&#x2F; 用户上传文件时指定的前缀。</p>
<p>        Map&lt;String, String&gt; respMap &#x3D; new LinkedHashMap&lt;String, String&gt;();</p>
<p>        try {<br>            long expireTime &#x3D; 30;<br>            long expireEndTime &#x3D; System.currentTimeMillis() + expireTime * 1000;<br>            Date expiration &#x3D; new Date(expireEndTime);<br>            PolicyConditions policyConds &#x3D; new PolicyConditions();<br>            policyConds.addConditionItem(PolicyConditions.COND_CONTENT_LENGTH_RANGE, 0, 1048576000);<br>            policyConds.addConditionItem(MatchMode.StartWith, PolicyConditions.COND_KEY, dir);</p>
<p>            String postPolicy &#x3D; ossClient.generatePostPolicy(expiration, policyConds);<br>            byte[] binaryData &#x3D; postPolicy.getBytes(“utf-8”);<br>            String encodedPolicy &#x3D; BinaryUtil.toBase64String(binaryData);<br>            String postSignature &#x3D; ossClient.calculatePostSignature(postPolicy);</p>
<p>            respMap.put(“accessid”, accessId);<br>            respMap.put(“policy”, encodedPolicy);<br>            respMap.put(“signature”, postSignature);<br>            respMap.put(“dir”, dir);<br>            respMap.put(“host”, host);<br>            respMap.put(“expire”, String.valueOf(expireEndTime &#x2F; 1000));</p>
<p>        } catch (Exception e) {<br>            &#x2F;&#x2F; Assert.fail(e.getMessage());<br>            System.out.println(e.getMessage());<br>        } finally {<br>            ossClient.shutdown();<br>        }</p>
<p>        return respMap;<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

测试接口
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="http://localhost:14000/api/thirdparty/v1/admin/oss/getPolicy">http://localhost:14000/api/thirdparty/v1/admin/oss/getPolicy</a> <br>{<br> “accessid”: “LTAI4G3KxBJ26EUbWsenmqhP”,<br> “policy”: “eyJleHBpcmF0aW9uIjoiMjAyMC0wNC0yOFQwMjozMzowNy42NzNaIiwiY29uZGl0aW9ucyI6W1siY29udGVudC1sZW5ndGgtcmFuZ2UiLDAsMTA0ODU3NjAwMF0sWyJzdGFydHMtd2l0aCIsIiRrZXkiLCIyMDIwLTA0LTI4LyJdXX0&#x3D;”,<br> “signature”: “pfn4cggFTMMNqTs+qUnDN5c+k5M&#x3D;”,<br> “dir”: “2020-04-28&#x2F;“,<br> “host”: “<a target="_blank" rel="noopener" href="https://passjava.oss-cn-beijing.aliyuncs.com&quot;/">https://passjava.oss-cn-beijing.aliyuncs.com&quot;</a>,<br> “expire”: “1588041187”<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

##### <span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">3</span> 配置网关路由

因为前端页面配置的统一访问路径是http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8060</span><span class="token operator">/</span>api<span class="token operator">/</span>，所以需要将访问thirdparty的服务通过网关路由到thirdparty服务
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>将请求<br><a target="_blank" rel="noopener" href="http://localhost:8060/api/thirdparty/v1/admin/oss/getPolicy">http://localhost:8060/api/thirdparty/v1/admin/oss/getPolicy</a><br>转发到<br><a target="_blank" rel="noopener" href="http://localhost:14000/api/thirdparty/v1/admin/oss/getPolicy">http://localhost:14000/api/thirdparty/v1/admin/oss/getPolicy</a> </p>
<pre class="line-numbers language-java"><code class="language-java">

配置网关：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>spring:<br>  cloud:<br>    gateway:<br>      routes:<br>        - id: route_thirdparty # 题目微服务路由规则<br>          uri: lb:&#x2F;&#x2F;passjava-thirdparty # 负载均衡，将请求转发到注册中心注册的assjava-thirdparty服务<br>          predicates: # 断言<br>            - Path&#x3D;&#x2F;api&#x2F;thirdparty&#x2F;** # 如果前端请求路径包含 api&#x2F;thirdparty，则应用这条路由规则<br>          filters: #过滤器<br>            - RewritePath&#x3D;&#x2F;api&#x2F;(?&lt;segment&gt;.*),&#x2F;${segment} # 将跳转路径中包含的api替换成空</p>
<pre class="line-numbers language-java"><code class="language-java">

测试可以上传成功

##### <span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">4</span> 配置跨域访问

配置跨域访问，所有post请求都可以跨域访问

##### <span class="token number">3.4</span><span class="token punctuation">.</span><span class="token number">5</span> Web端上传组件
<span class="token operator">-</span> 单文件上传组件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>singleUpload.vue<br>&lt;template&gt; <br>  &lt;div&gt;<br>    &lt;el-upload<br>      action&#x3D;”<a target="_blank" rel="noopener" href="http://passjava.oss-cn-beijing.aliyuncs.com&quot;/">http://passjava.oss-cn-beijing.aliyuncs.com&quot;</a><br>      :data&#x3D;”dataObj”<br>      list-type&#x3D;”picture”<br>      :multiple&#x3D;”false” :show-file-list&#x3D;”showFileList”<br>      :file-list&#x3D;”fileList”<br>      :before-upload&#x3D;”beforeUpload”<br>      :on-remove&#x3D;”handleRemove”<br>      :on-success&#x3D;”handleUploadSuccess”<br>      :on-preview&#x3D;”handlePreview”&gt;<br>      &lt;el-button size&#x3D;”small” type&#x3D;”primary”&gt;点击上传&lt;&#x2F;el-button&gt;<br>      &lt;div slot&#x3D;”tip” class&#x3D;”el-upload__tip”&gt;只能上传jpg&#x2F;png文件，且不超过10MB&lt;&#x2F;div&gt;<br>    &lt;&#x2F;el-upload&gt;<br>    &lt;el-dialog :visible.sync&#x3D;”dialogVisible”&gt;<br>      &lt;img width&#x3D;”100%” :src&#x3D;”fileList[0].url” alt&#x3D;””&gt;<br>    &lt;&#x2F;el-dialog&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br>&lt;script&gt;<br>   import {policy} from ‘.&#x2F;policy’<br>   import { getUUID } from ‘@&#x2F;utils’</p>
<p>  export default {<br>    name: ‘singleUpload’,<br>    props: {<br>      value: String<br>    },<br>    computed: {<br>      imageUrl() {<br>        return this.value;<br>      },<br>      imageName() {<br>        if (this.value !&#x3D; null &amp;&amp; this.value !&#x3D;&#x3D; ‘’) {<br>          return this.value.substr(this.value.lastIndexOf(“&#x2F;“) + 1);<br>        } else {<br>          return null;<br>        }<br>      },<br>      fileList() {<br>        return [{<br>          name: this.imageName,<br>          url: this.imageUrl<br>        }]<br>      },<br>      showFileList: {<br>        get: function () {<br>          return this.value !&#x3D;&#x3D; null &amp;&amp; this.value !&#x3D;&#x3D; ‘’&amp;&amp; this.value!&#x3D;&#x3D;undefined;<br>        },<br>        set: function (newValue) {<br>        }<br>      }<br>    },<br>    data() {<br>      return {<br>        dataObj: {<br>          policy: ‘’,<br>          signature: ‘’,<br>          key: ‘’,<br>          ossaccessKeyId: ‘’,<br>          dir: ‘’,<br>          host: ‘’,<br>          &#x2F;&#x2F; callback:’’,<br>        },<br>        dialogVisible: false<br>      };<br>    },<br>    methods: {<br>      emitInput(val) {<br>        this.$emit(‘input’, val)<br>      },<br>      handleRemove(file, fileList) {<br>        this.emitInput(‘’);<br>      },<br>      handlePreview(file) {<br>        this.dialogVisible &#x3D; true;<br>      },<br>      beforeUpload(file) {<br>        let _self &#x3D; this;<br>        return new Promise((resolve, reject) &#x3D;&gt; {<br>          policy().then(response &#x3D;&gt; {<br>            _self.dataObj.policy &#x3D; response.data.policy;<br>            _self.dataObj.signature &#x3D; response.data.signature;<br>            _self.dataObj.ossaccessKeyId &#x3D; response.data.accessid;<br>            <em>self.dataObj.key &#x3D; response.data.dir + getUUID()+’</em>${filename}’;<br>            _self.dataObj.dir &#x3D; response.data.dir;<br>            _self.dataObj.host &#x3D; response.data.host;<br>            resolve(true)<br>          }).catch(err &#x3D;&gt; {<br>            reject(false)<br>          })<br>        })<br>      },<br>      handleUploadSuccess(res, file) {<br>        console.log(“上传成功…”)<br>        this.showFileList &#x3D; true;<br>        this.fileList.pop();<br>        this.fileList.push({name: file.name, url: this.dataObj.host + ‘&#x2F;‘ + this.dataObj.key.replace(“${filename}”,file.name) });<br>        this.emitInput(this.fileList[0].url);<br>      }<br>    }<br>  }<br>&lt;&#x2F;script&gt;<br>&lt;style&gt;</p>
<p>&lt;&#x2F;style&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 获取签名的JS文件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>import http from ‘@&#x2F;utils&#x2F;httpRequest.js’<br>export function policy () {<br>  return new Promise((resolve) &#x3D;&gt; {<br>    http({<br>      url: http.adornUrl(‘&#x2F;thirdparty&#x2F;v1&#x2F;admin&#x2F;oss&#x2F;getPolicy’),<br>      method: ‘get’,<br>      params: http.adornParams({})<br>    }).then(({ data }) &#x3D;&gt; {<br>      resolve(data)<br>    })<br>  })<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> 使用单文件上传组件
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>使用上传图片组件<br>&lt;el-form-item label&#x3D;”类型logo路径” prop&#x3D;”logoUrl”&gt;<br>    &lt;single-upload v-model&#x3D;”dataForm.logoUrl”&gt;&lt;&#x2F;single-upload&gt;<br>&lt;&#x2F;el-form-item&gt;</p>
<p>&lt;script&gt;<br>  import SingleUpload from “@&#x2F;components&#x2F;upload&#x2F;singleUpload” &#x2F;&#x2F; 引入单文件上传组件<br>  export default {<br>    components:{ SingleUpload }<br>  }<br>&lt;&#x2F;script&gt;</p>
<pre class="line-numbers language-java"><code class="language-java">

上传文件成功

## <span class="token number">6.7</span> 整合统一异常处理

### <span class="token number">1</span><span class="token punctuation">.</span>缘起

<span class="token operator">></span> 
  “
  我们在写代码的时候，通常会在方法里面添加各种<span class="token keyword">try</span> <span class="token keyword">catch</span>来捕获异常，会发现有很多重复的代码，所以我们可以整合统一异常处理来优化代码结构。
  ”
 

拦截异常并统一处理我们可以用到`<span class="token annotation punctuation">@RestControllerAdvice</span>`注解

### <span class="token number">2</span><span class="token punctuation">.</span>自定义异常处理类
<span class="token operator">-</span> 添加统一异常处理类注解`<span class="token annotation punctuation">@RestControllerAdvice</span>`<span class="token operator">-</span> 添加日志注解`<span class="token annotation punctuation">@Slf4j</span>`<span class="token operator">-</span> 添加异常处理方法注解`<span class="token annotation punctuation">@ExceptionHandler</span>`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>package com.jackson0714.passjava.question.exception;</p>
<p>&#x2F;*<br>* 集中处理所有异常<br> *&#x2F;<br>@Slf4j<br>@RestControllerAdvice(basePackages &#x3D; “com.jackson0714.passjava.question.controller”)<br>public class PassjavaExceptionControllerAdvice {</p>
<p>    @ResponseBody<br>    @ExceptionHandler(value&#x3D; MethodArgumentNotValidException.class)<br>    public R handleValidException(MethodArgumentNotValidException e) {<br>        log.error(“数据校验出现问题{}，异常类型：{}”, e.getMessage(), e.getClass());<br>        BindingResult bindingResult &#x3D; e.getBindingResult();<br>        Map&lt;String, String&gt; errorMap &#x3D; new HashMap&lt;&gt;();<br>        bindingResult.getFieldErrors().forEach((fieldError)-&gt;{<br>            errorMap.put(fieldError.getField(), fieldError.getDefaultMessage());<br>        });</p>
<p>        return R.error(BizCodeEnum.VALID_EXCEPTION.getCode(), BizCodeEnum.VALID_EXCEPTION.getMsg()).put(“data”, errorMap);<br>    }</p>
<p>    @ExceptionHandler(value&#x3D;Throwable.class)<br>    public R handleException(Throwable throwable) {<br>        log.error(“未知异常{}，异常类型：{}”, throwable.getMessage(), throwable.getClass());<br>        <br>        return R.error(BizCodeEnum.UNKNOWN_EXCEPTION.getCode(), BizCodeEnum.UNKNOWN_EXCEPTION.getMsg());<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">3</span><span class="token punctuation">.</span>推荐的系统错误码

#### <span class="token number">3.1</span> 错误码和错误信息定义类
<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span>错误码长度：<span class="token number">5</span>个数字<span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">.</span>前两位：业务场景<span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">.</span>后三位：错误码
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>10：通用业务<br> 001：参数格式校验错误（10001）<br>11：会员业务<br>12：题目业务<br>13：内容业务<br>14：学习业务</p>
<pre class="line-numbers language-java"><code class="language-java">

#### <span class="token number">3.2</span> 错误码枚举类

com<span class="token punctuation">.</span>jackson0714<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exception<span class="token punctuation">.</span>BizCodeEnum

定义了两种异常枚举：系统未知异常、参数格式校验失败
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>package com.jackson0714.common.exception;</p>
<p>public enum BizCodeEnum {<br>    UNKNOWN_EXCEPTION(10000, “系统未知异常”),<br>    VALID_EXCEPTION(10001, “参数格式校验失败”);</p>
<p>    private int code;<br>    private String msg;<br>    BizCodeEnum(int code, String msg) {<br>        this.code &#x3D; code;<br>        this.msg &#x3D; msg;<br>    }</p>
<p>    public int getCode() {<br>        return code;<br>    }</p>
<p>    public String getMsg() {<br>        return msg;<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

### <span class="token number">4</span><span class="token punctuation">.</span>测试代码

<span class="token operator">></span> 
  “
  测试场景<span class="token number">1</span>：校验参数displayOrder必须为正整数，如果displayOrder不为正整数，则会抛出异常
  ”
 
<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">.</span>实体类上添加校验注解`<span class="token annotation punctuation">@Positive</span>`
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;**<br> * 排序<br> *&#x2F;<br>@Positive<br>private Integer displayOrder;</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">.</span>controller类里面添加save方法，并添加校验参数注解<span class="token annotation punctuation">@Valid</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>&#x2F;**<br>* 保存<br>*&#x2F;<br>@RequestMapping(“&#x2F;save”)<br>public R save(@Valid @RequestBody QuestionEntity question){<br>    questionService.save(question);</p>
<p>    return R.ok();<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

测试：

用Postman工具调用save方法

请求地址：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="http://192.168.10.160:8060/api/question/v1/admin/question/save">http://192.168.10.160:8060/api/question/v1/admin/question/save</a></p>
<pre class="line-numbers language-java"><code class="language-java">

请求参数：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>{<br>    “displayOrder”: 0.2<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

返回结果：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>{<br>    “msg”: “参数格式校验失败”,<br>    “code”: 10001,<br>    “data”: {<br>        “displayOrder”: “必须是正数”<br>    }<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

<span class="token operator">></span> 
  “
  测试场景<span class="token number">2</span>：对于代码里面直接抛出的异常，也可以handle
  ”
 

<span class="token number">1</span><span class="token punctuation">.</span>controller类里面添加查询题目的方法，并抛出Exception异常
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x2F;**<br>* 信息<br>*&#x2F;<br>@RequestMapping(“&#x2F;info&#x2F;{id}”)<br>&#x2F;&#x2F;@RequiresPermissions(“question:question:info”)<br>public R info(@PathVariable(“id”) Long id) throws Exception {<br>    QuestionEntity question &#x3D; questionService.getById(id);<br>    throw new Exception(“test”);</p>
<p>    &#x2F;&#x2F;return R.ok().put(“question”, question);<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

测试：

用Postman工具调用save方法

请求地址：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="http://192.168.10.160:8060/api/question/v1/admin/question/save">http://192.168.10.160:8060/api/question/v1/admin/question/save</a></p>
<pre class="line-numbers language-java"><code class="language-java">

返回结果：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>{<br>    “msg”: “系统未知异常”,<br>    “code”: 10000<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

证明统一处理方法被调用了：
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>@ExceptionHandler(value&#x3D;Throwable.class)<br>public R handleException(Throwable throwable) {<br>    return R.error(BizCodeEnum.UNKNOWN_EXCEPTION.getCode(), BizCodeEnum.UNKNOWN_EXCEPTION.getMsg());<br>}</p>
<pre class="line-numbers language-java"><code class="language-java">

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>推荐文章</p>
<pre class="line-numbers language-java"><code class="language-java">
<span class="token operator">-</span> <span class="token operator">-</span> <span class="token operator">-</span> <span class="token operator">-</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>原创电子书历时整整一年总结的 Java 面试 + Java 后端技术学习指南，这是本人这几年及校招的总结，各种高频面试题已经全部进行总结，按照章节复习即可，已经拿到了大厂offer。<br>原创思维导图扫码或者微信搜 程序员的技术圈子 回复 面试 领取原创电子书和思维导图。</p>
<p>&#96;&#96;&#96;</p>
<p>原文地址：<a target="_blank" rel="noopener" href="https://sihai.blog.csdn.net/article/details/111243767">https://sihai.blog.csdn.net/article/details/111243767</a></p>

                </div>
                <!-- 欧阳思海，modify，2020.05.01-->
<!-- 文章详情详情页面的头部广告位置信息 -->
<div id="post-head-panel">
    
    <a href="https://github.com/OUYANGSIHAI/JavaInterview" style="font-size: 18px;" target="_blank">
        <img src="/icons/hot.gif">
        本人花费半年的时间总结的《Java面试指南》已拿腾讯等大厂offer，已开源在github ，欢迎star！
    </a>
    
    
</div>
<br />



<blockquote>
    
            <p>本文GitHub <a href="https://github.com/OUYANGSIHAI/JavaInterview" target="_blank">https://github.com/OUYANGSIHAI/JavaInterview</a> 已收录，这是我花了6个月总结的<b>一线大厂Java面试</b>总结，本人已拿大厂offer，欢迎star</p>
    
    <p>原文链接：blog.ouyangsihai.cn &gt;&gt; <a href="/5w-zi-172-tu-chao-ji-sai-ya-ji-spring-cloud-shi-zhan.html" target="_blank">5w 字 | 172 图 | 超级赛亚级 Spring Cloud 实战</a></p>
</blockquote>
                <hr />

                
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">多少都是对我的认可</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="http://image.ouyangsihai.cn/FpbhsOuf3Ar9vY34B97Y2qQ7LVGe" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="http://image.ouyangsihai.cn/FgYlMzms68PH73PWpZBwPfbLTAws" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
                

                <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

                

                
                <div class="reprint1">
                    <p>
                        <span class="reprint1-tip">
                            <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                        </span>
                        <a href="https://blog.ouyangsihai.cn" class="b-link-green">好好学java</a>
                        <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                        <a href="/5w-zi-172-tu-chao-ji-sai-ya-ji-spring-cloud-shi-zhan.html" class="b-link-green">5w 字 | 172 图 | 超级赛亚级 Spring Cloud 实战</a>
                    </p>
                </div>

            </div>
        </div>

        

        

        

        

        
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }
    /* valine 评论框增加背景图片 */
    #vcomments textarea {
        box-sizing: border-box;
        background: url("") 100% 100% no-repeat;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    /* 修复评论第一行位置错位 */
    .v .vlist .vcard {
    padding-top: 2.5em !important ;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="/libs//libs/jQuery-emoji/dist/css/jquery.emoji.css">
<script src="/libs//libs/jQuery-emoji/dist/js/jquery.emoji.min.js"></script>
<script src="/libs//libs/jQuery-emoji/dist/js/emoji.list.js"></script> -->
<script>
    new Valine({
        el: '#vcomments',
        appId: 'MxSNOS83TYWU3Opsy2GTW1ih-gzGzoHsz',
        appKey: '4XevOgmAxHEwVDnIKgvEUihB',
        notify: 'true' === 'true',
        verify: 'true' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '请畅所欲言吧，别害羞~',

    });

//     function parse_emoji() {
//     jQuery(".vcontent").emojiParse({
//       basePath: '/libs/jQuery-emoji/images/emoji',
//       icons: emojiLists   // 注：详见 js/emoji.list.js
//     });
//   }
  
//   setTimeout(function() {
//     // jQuery emoji 解析
//     parse_emoji();
//     // jquery emoji 初始化
//     jQuery(".veditor").emoji({
//       showTab: true,
//       animation: 'slide',
//       basePath: '/libs/jQuery-emoji/images/emoji',
//       icons: emojiLists  // 注：详见 js/emoji.list.js
//     });
//     jQuery(".vmore").on("click", function() {
//       setTimeout(function() {
//         parse_emoji();
//       }, 500);
//     });
//   }, 800)

</script>
        

        

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/zuo-tian-you-du-zhe-shuo-ta-bu-hui-docker-jin-tian-jiu-gei-ni-gan-chu-lai-liao.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="昨天有读者说他不会 docker，今天就给你肝出来了">
                        
                        <span class="card-title">昨天有读者说他不会 docker，今天就给你肝出来了</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            富 Web 时代，应用变得越来越强大，与此同时也越来越复杂。集群部署、隔离环境、灰度发布以及动态扩容缺一不可，而容器化则成为中间的必要桥梁。


本文我们就来探索一下 Docker 的神秘世界，从零到一掌握 Docker 的基本原理与实践操
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock fa-fw icon-date"></i>2021-04-04
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A5%BD%E5%A5%BD%E5%AD%A6java/" class="post-category" target="_blank">
                                    好好学java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/yi-kuan-java-dai-ma-sheng-cheng-qi-wo-shou-gou-liao-jia-ban-zou-qi.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="一款java代码生成器（我受够了加班），走起！">
                        
                        <span class="card-title">一款java代码生成器（我受够了加班），走起！</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            点击上方 **好好学java **，选择 **星标 **公众号
重磅资讯、干货，第一时间送达
今日推荐： 个人原创100W+访问量博客：点击前往，查看更多
先以一首歌《倒带》开头吧 预备 唱

我受够了加班你所谓的安排- 说的早点下班到底多
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock fa-fw icon-date"></i>2021-04-04
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%A5%BD%E5%A5%BD%E5%AD%A6java/" class="post-category" target="_blank">
                                    好好学java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>
    </div>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('500')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 好好学java<br />'
            + '作者: 好好学java<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>



<!--
<script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script>
<script>
    const btw = new BTWPlugin();
    btw.init({
        id: 'container',
        blogId: '15305-1590684104111-518',
        name: '程序员的技术圈子',
        qrcode: 'http://image.ouyangsihai.cn/FtAUOeE5--1JTdcuuZFIhMuEUuJO',
        keyword: 'vip',
    });
</script>
-->

    </div>
    <div id="toc-aside" style="width: 310px;" class="expanded col l3 hide-on-med-and-down">
        <!-- 自定义右侧card：欧阳思海 -->
        <!-- <div id="my-card" style="background: ">
            
        </div> -->
        <!-- <div class="toc-widget">
            <div class="toc-title" style="display: none;"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;</div>
            <div id="toc-content"></div>
        </div> -->








        <aside class="col-lg-3" style="width: 300px;">

            <link rel="stylesheet" type="text/css" href="/css/my-aside.css">

            <!-- 关注公众号信息：欧阳思海 -->
            <div class="widget-wrap">
                <div class="widget bg-danger" style="color:whitesmoke; background-color: #419488">
                    <div class="card-front animated col s12 m12 l8 offset-l2 fadeInUp">
                        <div class="row">
                            <div class="col-md-5" style="text-align: center;">
                                <img class="adv" style="width: 95px; height: 95px;"
                                    src="http://image.ouyangsihai.cn/FtAUOeE5--1JTdcuuZFIhMuEUuJO">
                            </div>
                            <div class="col-md-7" style="text-align: center;">
                                <h2 style="font-size: 18px; 
                                    margin: 0; 
                                    padding: 0;
                                    border: 0; 
                                    outline: 0;
                                    font-weight: inherit;
                                    font-style: inherit;
                                    font-family: inherit;
                                    vertical-align: baseline;">关注公众号</h2>
                                 
                                <small style="font-size: 15px;">
                                    →「技术干货」每日推送 <br>
                                    →「回复资料」领取资料 <br>
                                    →「微信加群」每周福利 <br>
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- <div style="font-size: 0.8em;">
                        <a href="/assets/erweima.jpg" target="_blank"
                            style="color:orange;font-size: 14px;">点击添加我的微信，加入技术讨论群</a>
                        除公众号以外，我还会在以下平台发布内容：
                    </div>
                    -->

                    <div class="profile-block social-links col-md-7" style="text-align: center;">
                        <table style="align-items: center; 
                                        padding-left: 25px;">
                            <tbody>
                                <tr>
                                    <td style="margin: 0;
                                                padding: 0;
                                                border: 0;
                                                outline: 0;
                                                font-weight: inherit;
                                                font-style: inherit;
                                                font-family: inherit;
                                                vertical-align: baseline;"><a
                                            style="color: whitesmoke;font-size: 25px;"
                                            href="https://github.com/OUYANGSIHAI/JavaInterview" target="_blank" title="GitHub"
                                            class="tooltip">
                                            <img style="width: 22px;height: 22px;" src="/icons/github.svg"></a>
                                    </td>

                                    <td style="margin: 0;
                                                padding: 0;
                                                border: 0;
                                                outline: 0;
                                                font-weight: inherit;
                                                font-style: inherit;
                                                font-family: inherit;
                                                vertical-align: baseline;"><a
                                            style="color: whitesmoke;font-size: 25px;"
                                            href="https://www.zhihu.com/people/hai-hai-ren-sheng-50/activities"
                                            target="_blank" title="知乎" class="tooltip">
                                            <img style="width: 22px;" src="/icons/zhihu.svg"></a>
                                    </td>
                                    <td style="margin: 0;
                                                padding: 0;
                                                border: 0;
                                                outline: 0;
                                                font-weight: inherit;
                                                font-style: inherit;
                                                font-family: inherit;
                                                vertical-align: baseline;"><a
                                            style="color: whitesmoke;font-size: 25px;"
                                            href="https://blog.csdn.net/sihai12345" target="_blank" title="CSDN"
                                            class="tooltip">
                                            <img style="width: 18px;" src="/icons/CSDN.svg"></a>
                                    </td>
                                    <td style="margin: 0;
                                                padding: 0;
                                                border: 0;
                                                outline: 0;
                                                font-weight: inherit;
                                                font-style: inherit;
                                                font-family: inherit;
                                                vertical-align: baseline;"><a
                                            style="color: whitesmoke;font-size: 25px;"
                                            href="https://www.jianshu.com/u/12b0bd4c857c" target="_blank" title="简书"
                                            class="tooltip">
                                            <img style="width: 22px;" src="/icons/JianShu.svg"></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


            

            <!-- custom rightside_link：热门文章推荐：欧阳思海 -->
            
            <div class="widget-wrap widget-panel">
                <p style="text-align: left;padding-bottom: 10px;line-height: 30px; font-size: 14px;">
                    
                    <a href="https://github.com/OUYANGSIHAI/JavaInterview" target="_blank">

                        <img src="/icons/hot.gif">

                        本人花费半年的时间总结的《 Java 面试指南》已拿腾讯等大厂 offer，已开源在 github ，欢迎 star！
                    </a><br>
                    
                    <a href="https://mp.weixin.qq.com/s/I0jimqziHqRNaIy0kXRCnw" target="_blank">

                        <img src="/icons/hot.gif">

                        2020 Java 1000G 最新学习资源，Java基础、Java项目实战、Java分布式等等！
                    </a><br>
                    
                    <a href="http://image.ouyangsihai.cn/FpB-dO6g-XU44mMrVlj7EL1y7Rs7" target="_blank">

                        <img src="/icons/hot.gif">

                        高级 Java 开发微信群，一起搞事情吧！
                    </a><br>
                    
                </p>
            </div>
            

            

            <!-- custom rightside_banner：右侧广告或者其他的栏目设置：欧阳思海 -->
            
            <div class="widget-wrap">
                <a href="https://github.com/OUYANGSIHAI/JavaInterview" target="_blank">
                    <img src="http://image.ouyangsihai.cn/FhhoEYMaNr6m0v8KhG8vSPgoREBV" style="width: 100%;">
                </a>
            </div>
            
            

            

            <!-- 右侧专栏分类：欧阳思海 -->
            
            <div class="widget-wrap widget-panel">
                <ul class="media-list">
                    
                    <li class="media">
                        <a href="/categories/MySQL的艺术世界/" target="_blank">
                            <div class="media-left">
                                <img class="media-object" src="http://image.ouyangsihai.cn/Fn3kQurieQ_0QUeqPmx5RW5i6R9n" style="width: 55px;">
                            </div>
                            <div class="media-body">
                                <h4 class="media-heading" style="margin-bottom: 10px; font-size: 100%;
                                                                    margin: 0;
                                                                    padding: 0;
                                                                    border: 0;
                                                                    outline: 0;
                                                                    font-weight: inherit;
                                                                    font-style: inherit;
                                                                    font-family: inherit;
                                                                    vertical-align: baseline;">
                                    MySQL 的系列文章，解决全部面试问题！
                                </h4>
                                <p>
                                    总共10篇文章，面试热门的锁、事务，通通解决了！
                                </p>
                            </div>
                        </a>
                    </li>
                    <hr>
                    
                    <li class="media">
                        <a href="/categories/深入理解Java虚拟机/" target="_blank">
                            <div class="media-left">
                                <img class="media-object" src="http://image.ouyangsihai.cn/FpcS21VWJOHSgGzKcpW3_xVTSEeN" style="width: 55px;">
                            </div>
                            <div class="media-body">
                                <h4 class="media-heading" style="margin-bottom: 10px; font-size: 100%;
                                                                    margin: 0;
                                                                    padding: 0;
                                                                    border: 0;
                                                                    outline: 0;
                                                                    font-weight: inherit;
                                                                    font-style: inherit;
                                                                    font-family: inherit;
                                                                    vertical-align: baseline;">
                                    深入理解 Java 虚拟机，面试必问
                                </h4>
                                <p>
                                    总共10篇文章，包括内存模型、GC算法、GC收集器等。
                                </p>
                            </div>
                        </a>
                    </li>
                    <hr>
                    
                </ul>
            </div>
            

            <!-- 右侧分类 -->
            <div class="widget-wrap widget-panel">
                <h3 class="widget-title">文章分类</h3>
                <div class="widget">
                    <ul class="category-list">
                        
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/趣聊数据结构与算法/">>
                                趣聊数据结构与算法</a><span class="category-list-count">6</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/职业生涯浅谈/">>
                                职业生涯浅谈</a><span class="category-list-count">33</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java项目分享/">>
                                Java项目分享</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java面试经验/">>
                                Java面试经验</a><span class="category-list-count">4</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/我要进大厂/">>
                                我要进大厂</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/好好学java/">>
                                好好学java</a><span class="category-list-count">1116</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/剑指offer/">>
                                剑指offer</a><span class="category-list-count">112</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/css/">>
                                css</a><span class="category-list-count">12</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/其他框架/">>
                                其他框架</a><span class="category-list-count">142</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/python其他/">>
                                python其他</a><span class="category-list-count">45</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/数据库相关/">>
                                数据库相关</a><span class="category-list-count">293</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java核心知识/">>
                                Java核心知识</a><span class="category-list-count">196</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java面试题/">>
                                Java面试题</a><span class="category-list-count">308</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/mybatis源码/">>
                                mybatis源码</a><span class="category-list-count">56</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/spring教程/">>
                                spring教程</a><span class="category-list-count">173</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/springboot教程/">>
                                springboot教程</a><span class="category-list-count">156</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/实战Activiti工作流/">>
                                实战Activiti工作流</a><span class="category-list-count">4</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/springcloud教程/">>
                                springcloud教程</a><span class="category-list-count">39</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/linux/">>
                                linux</a><span class="category-list-count">91</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/python框架/">>
                                python框架</a><span class="category-list-count">43</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/python基础/">>
                                python基础</a><span class="category-list-count">78</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/dubbo/">>
                                dubbo</a><span class="category-list-count">37</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java源码/">>
                                Java源码</a><span class="category-list-count">76</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/叽叽喳喳杂七杂八/">>
                                叽叽喳喳杂七杂八</a><span class="category-list-count">10</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/MySQL的艺术世界/">>
                                MySQL的艺术世界</a><span class="category-list-count">8</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/jquery/">>
                                jquery</a><span class="category-list-count">14</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java并发/">>
                                Java并发</a><span class="category-list-count">43</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java文章合辑/">>
                                Java文章合辑</a><span class="category-list-count">11</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java基础修炼/">>
                                Java基础修炼</a><span class="category-list-count">7</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/不一样的Java8/">>
                                不一样的Java8</a><span class="category-list-count">3</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/小程序开发的世界/">>
                                小程序开发的世界</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java学习资源分享/">>
                                Java学习资源分享</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java小学生漫游/">>
                                Java小学生漫游</a><span class="category-list-count">2</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/rocketmq源码解析/">>
                                rocketmq源码解析</a><span class="category-list-count">33</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/springmvc最新教程/">>
                                springmvc最新教程</a><span class="category-list-count">9</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java的Exception/">>
                                Java的Exception</a><span class="category-list-count">6</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/vue-js/">>
                                vue.js</a><span class="category-list-count">10</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/实战设计模式/">>
                                实战设计模式</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/python数据处理/">>
                                python数据处理</a><span class="category-list-count">7</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java-Web闯关/">>
                                Java Web闯关</a><span class="category-list-count">7</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/springboot2-0最新教程/">>
                                springboot2.0最新教程</a><span class="category-list-count">11</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/netty/">>
                                netty</a><span class="category-list-count">16</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/rpc/">>
                                rpc</a><span class="category-list-count">13</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/拥抱大厂系列/">>
                                拥抱大厂系列</a><span class="category-list-count">6</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/eureka/">>
                                eureka</a><span class="category-list-count">19</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/分布式/">>
                                分布式</a><span class="category-list-count">6</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/中间件/">>
                                中间件</a><span class="category-list-count">23</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java基础/">>
                                Java基础</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/带你学Python/">>
                                带你学Python</a><span class="category-list-count">10</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/使用技术工具/">>
                                使用技术工具</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/mycat源码/">>
                                mycat源码</a><span class="category-list-count">5</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/深入理解Java虚拟机/">>
                                深入理解Java虚拟机</a><span class="category-list-count">8</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/spring源码/">>
                                spring源码</a><span class="category-list-count">2</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java集合源码分析/">>
                                Java集合源码分析</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/github的repo/">>
                                github的repo</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/Java框架深究/">>
                                Java框架深究</a><span class="category-list-count">1</span>
                        </li>
                        
                        <li class="category-list-item"><a class="category-list-link" href="categories/分布式架构/">>
                                分布式架构</a><span class="category-list-count">2</span>
                        </li>
                        
                        
                    </ul>
                </div>
            </div>

        </aside>









    </div>
</div>

<!-- TOC 悬浮按钮. 修改成永远不显示：欧阳思海-->




<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4, h5'
        });

        console.log('============');

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

                        
            /* 修复文章卡片 div 的宽度. */
            let fixPostCardWidth = function (srcId, targetId) {
                let srcDiv = $('#' + srcId);
                if (srcDiv.length === 0) {
                    return;
                }

                let w = srcDiv.width();
                if (w >= 450) {
                    w = w + 21;
                } else if (w >= 350 && w < 450) {
                    w = w + 18;
                } else if (w >= 300 && w < 350) {
                    w = w + 16;
                } else {
                    w = w + 14;
                }
                $('#' + targetId).width(w);
            };

            // 切换TOC目录展开收缩的相关操作.
            // 修改右侧边栏功能：欧阳思海
            const expandedClass = 'expanded';
            let $tocAside = $('#toc-aside');
            let $mainContent = $('#main-content');

            $('#floating-toc-btn .btn-floating').click(function () {
                if ($tocAside.hasClass(expandedClass)) {
                    $tocAside.removeClass(expandedClass).slideUp(500);
                    $mainContent.removeClass('l9');
                } else {
                    $tocAside.addClass(expandedClass).slideDown(500);
                    $mainContent.addClass('l9');
                }
                fixPostCardWidth('artDetail', 'prenext-posts');
            });
                        
                    });
</script>
    

</main>


        <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            
	    Copyright&copy; 2019 <a href="https://www.java1000.com/" target="_blank"> 好好学java </a>维护. 网站备案/许可证号：赣ICP备17007984号-3
            <br>
            <span id="sitetime"></span>
            <br>

            

            
                    <!-- 
                        <span id="busuanzi_container_site_pv" style='display:none'></span>
                        总访问量: <span id="busuanzi_value_site_pv" class="white-color"></span>
                    
        
                    
                        <span id="busuanzi_container_site_uv" style='display:none'></span>
                        人次&nbsp; | &nbsp;访客人数: <span id="busuanzi_value_site_uv" class="white-color"></span> 人
                     -->
                        <!-- 修改计数：欧阳思海 -->
                    
                        <span id="busuanzi_container_site_pv" style='display:inline'>
                            <i class="fa fa-heart-o"></i>
                            本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                        </span>
                    
                    
                        <span id="busuanzi_container_site_uv" style='display:none'>
                            人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                        </span>
                    
    
            

            
                &nbsp; | &nbsp;字数统计:&nbsp;
                <span class="white-color">8290.3k</span> 字
            

            
            <br>

        </div>

        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/OUYANGSIHAI/JavaInterview" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-code-branch"></i>
    </a>


 
    <a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=1446037005@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>




    <a href="https://zhihu.com/people/hai-hai-ren-sheng-50/activities" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-inverse">知</i>
    </a>









    <a href="https://blog.ouyangsihai.cn/sitemap.xml" class="tooltipped" target="_blank" data-tooltip="站点地图" data-position="top" data-delay="50">
        <i class="fa fa-sitemap"></i>
    </a>



    <a href="https://blog.ouyangsihai.cn/friends" class="tooltipped" target="_blank" data-tooltip="友情链接" data-position="top" data-delay="50">
        <i class="fa fa-address-book"></i>
    </a>
</div>

    </div>
</footer>

<div class="progress-bar"></div>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();

        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */

        var t1 = Date.UTC(2019, 08, 10, 00, 00, 00); //北京时间2019-8-1 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes *
            minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours +
            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒" ;
    } /*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

<!-- 修改计数：欧阳思海 -->
<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);  // 50ms周期检测函数
        var pvcountOffset = 1005469;  // 初始化首次数据
        var uvcountOffset = 250804;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int); // 停止检测
            }
        }
    });
</script>




        <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    console.log("lets go！");
    console.log("/");
    searchFunc("/" + "search.json", 'searchInput', 'searchResult');
});
</script>
        <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


        <script src="/libs/materialize/materialize.min.js"></script>
        <script src="/libs/masonry/masonry.pkgd.min.js"></script>
        <script src="/libs/aos/aos.js"></script>
        <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
        <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
        <script src="/js/matery.js"></script>

        <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149362573-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-149362573-1');
</script>



        
            <script src="/libs/others/clicklove.js"></script>
        

        
            <script async src="/libs/others/busuanzi.pure.mini.js"></script>
        

        <!-- 洪卫 shw2018 add 2019.08.28 -->
        <script type="text/javascript">
            var OriginTitile = document.title,
                st;
            document.addEventListener("visibilitychange", function () {
                document.hidden ? (document.title = "看不见我🙈~看不见我🙈~", clearTimeout(st)) : (document.title =
                    "(๑•̀ㅂ•́) ✧被发现了～", st = setTimeout(function () {
                        document.title = OriginTitile
                    }, 3e3))
            })
        </script>

        <!-- 鼠标点击烟花爆炸效果  洪卫 shw2018 add 2019.09.09 -->
        

        <!-- 背景雪花飘落特效洪卫 shw2018 add 2019.09.10 -->
        

        <!-- 鼠标点击文字特效 洪卫 shw2018 add 2019.09.10-->
        

        <!-- 背景雪花飘落特效 洪卫 shw2018 add 2019.09.10 -->
        

        <!-- 在线聊天工具  洪卫 shw2018 add 2019.09.11 -->
        

        <!-- 背景 canvas-nest  洪卫 shw 2018  add 2019.09.15-->
        

        <!-- 背景静止彩带  洪卫 shw 2018  add 2019.09.15-->
        

        <!-- 背景动态彩带 洪卫 shw 2018  add 2019.09.15-->
        

    </body>
</html>